<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>breadcrumb.js - Documentation</title><script src="scripts/prettify/prettify.js"></script><script src="scripts/prettify/lang-css.js"></script><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link href="styles/prettify.css" rel="stylesheet" type="text/css"><link href="styles/jsdoc.css" rel="stylesheet" type="text/css"><script src="scripts/nav.js" defer></script><meta content="width=device-width,initial-scale=1" name="viewport"></head><body><input class="nav-trigger" id="nav-trigger" type="checkbox"> <label class="navicon-button x" for="nav-trigger"><div class="navicon"></div></label> <label class="overlay" for="nav-trigger"></label><nav><h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Breadcrumb.html">Breadcrumb</a><ul class="methods"><li data-type="method"><a href="Breadcrumb.html#check">check</a></li><li data-type="method"><a href="Breadcrumb.html#computeVisibilityMap">computeVisibilityMap</a></li><li data-type="method"><a href="Breadcrumb.html#destroy">destroy</a></li><li data-type="method"><a href="Breadcrumb.html#handleClickOnEllipsis">handleClickOnEllipsis</a></li><li data-type="method"><a href="Breadcrumb.html#handleFullExpand">handleFullExpand</a></li><li data-type="method"><a href="Breadcrumb.html#handlePartialExpand">handlePartialExpand</a></li><li data-type="method"><a href="Breadcrumb.html#handleResize">handleResize</a></li><li data-type="method"><a href="Breadcrumb.html#hideEllipsis">hideEllipsis</a></li><li data-type="method"><a href="Breadcrumb.html#init">init</a></li><li data-type="method"><a href="Breadcrumb.html#showAllItems">showAllItems</a></li><li data-type="method"><a href="Breadcrumb.html#.autoInit">autoInit</a></li></ul></li></ul></nav><div id="main"><h1 class="page-title">breadcrumb.js</h1><section><article><pre class="prettyprint source linenums"><ol class="linenums"><li class="L0" id="line1"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> queryAll</span><span class="pun">,</span><span class="pln"> queryOne </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/dom-utils'</span><span class="pun">;</span></code></li><li class="L1" id="line2"><code></code></li><li class="L2" id="line3"><code><span class="com">/**</span></code></li><li class="L3" id="line4"><code><span class="com"> * @param {HTMLElement} element DOM element for component instantiation and scope</span></code></li><li class="L4" id="line5"><code><span class="com"> * @param {Object} options</span></code></li><li class="L5" id="line6"><code><span class="com"> * @param {String} options.ellipsisButtonSelector</span></code></li><li class="L6" id="line7"><code><span class="com"> * @param {String} options.ellipsisSelector</span></code></li><li class="L7" id="line8"><code><span class="com"> * @param {String} options.segmentSelector</span></code></li><li class="L8" id="line9"><code><span class="com"> * @param {String} options.expandableItemsSelector</span></code></li><li class="L9" id="line10"><code><span class="com"> * @param {String} options.staticItemsSelector</span></code></li><li class="L0" id="line11"><code><span class="com"> * @param {Function} options.onPartialExpand</span></code></li><li class="L1" id="line12"><code><span class="com"> * @param {Function} options.onFullExpand</span></code></li><li class="L2" id="line13"><code><span class="com"> * @param {Boolean} options.attachClickListener</span></code></li><li class="L3" id="line14"><code><span class="com"> */</span></code></li><li class="L4" id="line15"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Breadcrumb</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line16"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line17"><code><span class="com">   * @static</span></code></li><li class="L7" id="line18"><code><span class="com">   * Shorthand for instance creation and initialisation.</span></code></li><li class="L8" id="line19"><code><span class="com">   *</span></code></li><li class="L9" id="line20"><code><span class="com">   * @param {HTMLElement} root DOM element for component instantiation and scope</span></code></li><li class="L0" id="line21"><code><span class="com">   *</span></code></li><li class="L1" id="line22"><code><span class="com">   * @return {Breadcrumb} An instance of Breadcrumb.</span></code></li><li class="L2" id="line23"><code><span class="com">   */</span></code></li><li class="L3" id="line24"><code><span class="pln">  </span><span class="kwd">static</span><span class="pln"> autoInit</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> BREADCRUMB</span><span class="pun">:</span><span class="pln"> defaultOptions </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{})</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line25"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> breadcrumb </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Breadcrumb</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> defaultOptions</span><span class="pun">);</span></code></li><li class="L5" id="line26"><code><span class="pln">    breadcrumb</span><span class="pun">.</span><span class="pln">init</span><span class="pun">();</span></code></li><li class="L6" id="line27"><code><span class="pln">    root</span><span class="pun">.</span><span class="typ">ECLBreadcrumb</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> breadcrumb</span><span class="pun">;</span></code></li><li class="L7" id="line28"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> breadcrumb</span><span class="pun">;</span></code></li><li class="L8" id="line29"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L9" id="line30"><code></code></li><li class="L0" id="line31"><code><span class="pln">  constructor</span><span class="pun">(</span></code></li><li class="L1" id="line32"><code><span class="pln">    element</span><span class="pun">,</span></code></li><li class="L2" id="line33"><code><span class="pln">    </span><span class="pun">{</span></code></li><li class="L3" id="line34"><code><span class="pln">      ellipsisButtonSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-breadcrumb-ellipsis-button]'</span><span class="pun">,</span></code></li><li class="L4" id="line35"><code><span class="pln">      ellipsisSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-breadcrumb-ellipsis]'</span><span class="pun">,</span></code></li><li class="L5" id="line36"><code><span class="pln">      segmentSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-breadcrumb-item]'</span><span class="pun">,</span></code></li><li class="L6" id="line37"><code><span class="pln">      expandableItemsSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-breadcrumb-item="expandable"]'</span><span class="pun">,</span></code></li><li class="L7" id="line38"><code><span class="pln">      staticItemsSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-breadcrumb-item="static"]'</span><span class="pun">,</span></code></li><li class="L8" id="line39"><code><span class="pln">      onPartialExpand </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span></code></li><li class="L9" id="line40"><code><span class="pln">      onFullExpand </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span></code></li><li class="L0" id="line41"><code><span class="pln">      attachClickListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L1" id="line42"><code><span class="pln">      attachResizeListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L2" id="line43"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{},</span></code></li><li class="L3" id="line44"><code><span class="pln">  </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line45"><code><span class="pln">    </span><span class="com">// Check element</span></code></li><li class="L5" id="line46"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">element </span><span class="pun">||</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">nodeType </span><span class="pun">!==</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">.</span><span class="pln">ELEMENT_NODE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line47"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span></code></li><li class="L7" id="line48"><code><span class="pln">        </span><span class="str">'DOM element should be given to initialize this widget.'</span><span class="pun">,</span></code></li><li class="L8" id="line49"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L9" id="line50"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line51"><code></code></li><li class="L1" id="line52"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L2" id="line53"><code></code></li><li class="L3" id="line54"><code><span class="pln">    </span><span class="com">// Options</span></code></li><li class="L4" id="line55"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButtonSelector </span><span class="pun">=</span><span class="pln"> ellipsisButtonSelector</span><span class="pun">;</span></code></li><li class="L5" id="line56"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisSelector </span><span class="pun">=</span><span class="pln"> ellipsisSelector</span><span class="pun">;</span></code></li><li class="L6" id="line57"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">segmentSelector </span><span class="pun">=</span><span class="pln"> segmentSelector</span><span class="pun">;</span></code></li><li class="L7" id="line58"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableItemsSelector </span><span class="pun">=</span><span class="pln"> expandableItemsSelector</span><span class="pun">;</span></code></li><li class="L8" id="line59"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">staticItemsSelector </span><span class="pun">=</span><span class="pln"> staticItemsSelector</span><span class="pun">;</span></code></li><li class="L9" id="line60"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onPartialExpand </span><span class="pun">=</span><span class="pln"> onPartialExpand</span><span class="pun">;</span></code></li><li class="L0" id="line61"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onFullExpand </span><span class="pun">=</span><span class="pln"> onFullExpand</span><span class="pun">;</span></code></li><li class="L1" id="line62"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">=</span><span class="pln"> attachClickListener</span><span class="pun">;</span></code></li><li class="L2" id="line63"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener </span><span class="pun">=</span><span class="pln"> attachResizeListener</span><span class="pun">;</span></code></li><li class="L3" id="line64"><code></code></li><li class="L4" id="line65"><code><span class="pln">    </span><span class="com">// Private variables</span></code></li><li class="L5" id="line66"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButton </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L6" id="line67"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsElements </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L7" id="line68"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">staticElements </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L8" id="line69"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9" id="line70"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L0" id="line71"><code></code></li><li class="L1" id="line72"><code><span class="pln">    </span><span class="com">// Bind `this` for use in callbacks</span></code></li><li class="L2" id="line73"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnEllipsis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnEllipsis</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L3" id="line74"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L4" id="line75"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line76"><code></code></li><li class="L6" id="line77"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line78"><code><span class="com">   * Initialise component.</span></code></li><li class="L8" id="line79"><code><span class="com">   */</span></code></li><li class="L9" id="line80"><code><span class="pln">  init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line81"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">ECL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line82"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span><span class="str">'Called init but ECL is not present'</span><span class="pun">);</span></code></li><li class="L2" id="line83"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line84"><code></code></li><li class="L4" id="line85"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">=</span><span class="pln"> ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L5" id="line86"><code></code></li><li class="L6" id="line87"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButtonSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L7" id="line88"><code></code></li><li class="L8" id="line89"><code><span class="pln">    </span><span class="com">// Bind click event on ellipsis</span></code></li><li class="L9" id="line90"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line91"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButton</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnEllipsis</span><span class="pun">);</span></code></li><li class="L1" id="line92"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line93"><code></code></li><li class="L3" id="line94"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsElements </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">segmentSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L4" id="line95"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">staticElements </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">staticItemsSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L5" id="line96"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span></code></li><li class="L6" id="line97"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableItemsSelector</span><span class="pun">,</span></code></li><li class="L7" id="line98"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span></code></li><li class="L8" id="line99"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L9" id="line100"><code></code></li><li class="L0" id="line101"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">check</span><span class="pun">();</span></code></li><li class="L1" id="line102"><code></code></li><li class="L2" id="line103"><code><span class="pln">    </span><span class="com">// Bind resize events</span></code></li><li class="L3" id="line104"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line105"><code><span class="pln">      window</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'resize'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">);</span></code></li><li class="L5" id="line106"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line107"><code><span class="pln">    </span><span class="com">// Set ecl initialized attribute</span></code></li><li class="L7" id="line108"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L8" id="line109"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L9" id="line110"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line111"><code></code></li><li class="L1" id="line112"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line113"><code><span class="com">   * Destroy component.</span></code></li><li class="L3" id="line114"><code><span class="com">   */</span></code></li><li class="L4" id="line115"><code><span class="pln">  destroy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line116"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line117"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisButton</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span></code></li><li class="L7" id="line118"><code><span class="pln">        </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L8" id="line119"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnEllipsis</span><span class="pun">,</span></code></li><li class="L9" id="line120"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L0" id="line121"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line122"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line123"><code><span class="pln">      window</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'resize'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">);</span></code></li><li class="L3" id="line124"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line125"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line126"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">);</span></code></li><li class="L6" id="line127"><code><span class="pln">      ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L7" id="line128"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8" id="line129"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L9" id="line130"><code></code></li><li class="L0" id="line131"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L1" id="line132"><code><span class="com">   * Invoke event listener attached on the elipsis. Traslates to a full expand.</span></code></li><li class="L2" id="line133"><code><span class="com">   */</span></code></li><li class="L3" id="line134"><code><span class="pln">  handleClickOnEllipsis</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line135"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFullExpand</span><span class="pun">();</span></code></li><li class="L5" id="line136"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line137"><code></code></li><li class="L7" id="line138"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line139"><code><span class="com">   * Apply partial or full expand.</span></code></li><li class="L9" id="line140"><code><span class="com">   */</span></code></li><li class="L0" id="line141"><code><span class="pln">  async check</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line142"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> visibilityMap </span><span class="pun">=</span><span class="pln"> await </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">computeVisibilityMap</span><span class="pun">();</span></code></li><li class="L2" id="line143"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">visibilityMap</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L3" id="line144"><code></code></li><li class="L4" id="line145"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">visibilityMap</span><span class="pun">.</span><span class="pln">expanded </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line146"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFullExpand</span><span class="pun">();</span></code></li><li class="L6" id="line147"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line148"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handlePartialExpand</span><span class="pun">(</span><span class="pln">visibilityMap</span><span class="pun">);</span></code></li><li class="L8" id="line149"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line150"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line151"><code></code></li><li class="L1" id="line152"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line153"><code><span class="com">   * Removes the elipsis element and its event listeners.</span></code></li><li class="L3" id="line154"><code><span class="com">   */</span></code></li><li class="L4" id="line155"><code><span class="pln">  hideEllipsis</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line156"><code><span class="pln">    </span><span class="com">// Hide ellipsis</span></code></li><li class="L6" id="line157"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> ellipsis </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L7" id="line158"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ellipsis</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line159"><code><span class="pln">      ellipsis</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L9" id="line160"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line161"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L1" id="line162"><code></code></li><li class="L2" id="line163"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L3" id="line164"><code><span class="com">   * Show all expandable elements.</span></code></li><li class="L4" id="line165"><code><span class="com">   */</span></code></li><li class="L5" id="line166"><code><span class="pln">  showAllItems</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line167"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span></code></li><li class="L7" id="line168"><code><span class="pln">      item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">),</span></code></li><li class="L8" id="line169"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L9" id="line170"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line171"><code></code></li><li class="L1" id="line172"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line173"><code><span class="com">   * @param {Object} visibilityMap</span></code></li><li class="L3" id="line174"><code><span class="com">   */</span></code></li><li class="L4" id="line175"><code><span class="pln">  handlePartialExpand</span><span class="pun">(</span><span class="pln">visibilityMap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line176"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">visibilityMap</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L6" id="line177"><code></code></li><li class="L7" id="line178"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-breadcrumb--collapsed'</span><span class="pun">);</span></code></li><li class="L8" id="line179"><code></code></li><li class="L9" id="line180"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> isItemVisible </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> visibilityMap</span><span class="pun">;</span></code></li><li class="L0" id="line181"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isItemVisible </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="typ">Array</span><span class="pun">.</span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">isItemVisible</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L1" id="line182"><code></code></li><li class="L2" id="line183"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onPartialExpand</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line184"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onPartialExpand</span><span class="pun">(</span><span class="pln">isItemVisible</span><span class="pun">);</span></code></li><li class="L4" id="line185"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line186"><code><span class="pln">      </span><span class="com">// eslint-disable-next-line no-lonely-if</span></code></li><li class="L6" id="line187"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">)</span><span class="pln"> </span><span class="pun">></span><span class="pln"> </span><span class="lit">767</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line188"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> ellipsis </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L8" id="line189"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ellipsis</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line190"><code><span class="pln">          ellipsis</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L0" id="line191"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1" id="line192"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">,</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line193"><code><span class="pln">          item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span></code></li><li class="L3" id="line194"><code><span class="pln">            </span><span class="str">'aria-hidden'</span><span class="pun">,</span></code></li><li class="L4" id="line195"><code><span class="pln">            isItemVisible</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="str">'false'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">,</span></code></li><li class="L5" id="line196"><code><span class="pln">          </span><span class="pun">);</span></code></li><li class="L6" id="line197"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L7" id="line198"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line199"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line200"><code><span class="pln">          item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L0" id="line201"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L1" id="line202"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L2" id="line203"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line204"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L4" id="line205"><code></code></li><li class="L5" id="line206"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line207"><code><span class="com">   * Display all elements.</span></code></li><li class="L7" id="line208"><code><span class="com">   */</span></code></li><li class="L8" id="line209"><code><span class="pln">  handleFullExpand</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line210"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-breadcrumb--collapsed'</span><span class="pun">);</span></code></li><li class="L0" id="line211"><code></code></li><li class="L1" id="line212"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onFullExpand</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line213"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onFullExpand</span><span class="pun">();</span></code></li><li class="L3" id="line214"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line215"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hideEllipsis</span><span class="pun">();</span></code></li><li class="L5" id="line216"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">showAllItems</span><span class="pun">();</span></code></li><li class="L6" id="line217"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line218"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8" id="line219"><code></code></li><li class="L9" id="line220"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line221"><code><span class="com">   * Trigger events on resize</span></code></li><li class="L1" id="line222"><code><span class="com">   */</span></code></li><li class="L2" id="line223"><code><span class="pln">  handleResize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line224"><code><span class="pln">    clearTimeout</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer</span><span class="pun">);</span></code></li><li class="L4" id="line225"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer </span><span class="pun">=</span><span class="pln"> setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line226"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">check</span><span class="pun">();</span></code></li><li class="L6" id="line227"><code><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="lit">200</span><span class="pun">);</span></code></li><li class="L7" id="line228"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8" id="line229"><code></code></li><li class="L9" id="line230"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line231"><code><span class="com">   * Measure/evaluate which elements can be displayed and toggle those who don't fit.</span></code></li><li class="L1" id="line232"><code><span class="com">   */</span></code></li><li class="L2" id="line233"><code><span class="pln">  computeVisibilityMap</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line234"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">((</span><span class="pln">resolve</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line235"><code><span class="pln">      </span><span class="com">// Ignore if there are no expandableElements</span></code></li><li class="L5" id="line236"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements</span><span class="pun">.</span><span class="pln">length </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line237"><code><span class="pln">        resolve</span><span class="pun">({</span><span class="pln"> expanded</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">});</span></code></li><li class="L7" id="line238"><code><span class="pln">        </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L8" id="line239"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line240"><code></code></li><li class="L0" id="line241"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> wrapperWidth </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span></code></li><li class="L1" id="line242"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">,</span></code></li><li class="L2" id="line243"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L3" id="line244"><code></code></li><li class="L4" id="line245"><code><span class="pln">      setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line246"><code><span class="pln">        </span><span class="com">// Get the sum of all items' width</span></code></li><li class="L6" id="line247"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> allItemsWidth </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsElements</span></code></li><li class="L7" id="line248"><code><span class="pln">          </span><span class="pun">.</span><span class="pln">map</span><span class="pun">((</span><span class="pln">breadcrumbSegment</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line249"><code><span class="pln">            let segmentWidth </span><span class="pun">=</span><span class="pln"> breadcrumbSegment</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L9" id="line250"><code><span class="pln">            </span><span class="com">// Current page can have a display none set via the css.</span></code></li><li class="L0" id="line251"><code><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">segmentWidth </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line252"><code><span class="pln">              breadcrumbSegment</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'inline-flex'</span><span class="pun">;</span></code></li><li class="L2" id="line253"><code><span class="pln">              segmentWidth </span><span class="pun">=</span><span class="pln"> breadcrumbSegment</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L3" id="line254"><code><span class="pln">              breadcrumbSegment</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">cssText </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L4" id="line255"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L5" id="line256"><code><span class="pln">            </span><span class="kwd">return</span><span class="pln"> segmentWidth</span><span class="pun">;</span></code></li><li class="L6" id="line257"><code><span class="pln">          </span><span class="pun">})</span></code></li><li class="L7" id="line258"><code><span class="pln">          </span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">((</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">);</span></code></li><li class="L8" id="line259"><code><span class="pln">        </span><span class="com">// This calculation is not always 100% reliable, we add a 10% to limit the risk.</span></code></li><li class="L9" id="line260"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">allItemsWidth </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1.1</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> wrapperWidth</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line261"><code><span class="pln">          resolve</span><span class="pun">({</span><span class="pln"> expanded</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">});</span></code></li><li class="L1" id="line262"><code><span class="pln">          </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L2" id="line263"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3" id="line264"><code></code></li><li class="L4" id="line265"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> ellipsisItem </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">ellipsisSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L5" id="line266"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> ellipsisItemWidth </span><span class="pun">=</span><span class="pln"> ellipsisItem</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L6" id="line267"><code></code></li><li class="L7" id="line268"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> incompressibleWidth </span><span class="pun">=</span></code></li><li class="L8" id="line269"><code><span class="pln">          ellipsisItemWidth </span><span class="pun">+</span></code></li><li class="L9" id="line270"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">staticElements</span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">(</span></code></li><li class="L0" id="line271"><code><span class="pln">            </span><span class="pun">(</span><span class="pln">sum</span><span class="pun">,</span><span class="pln"> currentItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span></code></li><li class="L1" id="line272"><code><span class="pln">              sum </span><span class="pun">+</span><span class="pln"> currentItem</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">,</span></code></li><li class="L2" id="line273"><code><span class="pln">            </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L3" id="line274"><code><span class="pln">          </span><span class="pun">);</span></code></li><li class="L4" id="line275"><code></code></li><li class="L5" id="line276"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">incompressibleWidth </span><span class="pun">>=</span><span class="pln"> wrapperWidth</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line277"><code><span class="pln">          resolve</span><span class="pun">({</span></code></li><li class="L7" id="line278"><code><span class="pln">            expanded</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span></code></li><li class="L8" id="line279"><code><span class="pln">            isItemVisible</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[...</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements</span><span class="pun">.</span><span class="pln">map</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)],</span></code></li><li class="L9" id="line280"><code><span class="pln">          </span><span class="pun">});</span></code></li><li class="L0" id="line281"><code><span class="pln">          </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L1" id="line282"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2" id="line283"><code></code></li><li class="L3" id="line284"><code><span class="pln">        let previousItemsWidth </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L4" id="line285"><code><span class="pln">        let isPreviousItemVisible </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L5" id="line286"><code></code></li><li class="L6" id="line287"><code><span class="pln">        </span><span class="com">// Careful: reverse() is destructive, that's why we make a copy of the array</span></code></li><li class="L7" id="line288"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> isItemVisible </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[...</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableElements</span><span class="pun">]</span></code></li><li class="L8" id="line289"><code><span class="pln">          </span><span class="pun">.</span><span class="pln">reverse</span><span class="pun">()</span></code></li><li class="L9" id="line290"><code><span class="pln">          </span><span class="pun">.</span><span class="pln">map</span><span class="pun">((</span><span class="pln">otherSegment</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line291"><code><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isPreviousItemVisible</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1" id="line292"><code></code></li><li class="L2" id="line293"><code><span class="pln">            previousItemsWidth </span><span class="pun">+=</span><span class="pln"> otherSegment</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L3" id="line294"><code></code></li><li class="L4" id="line295"><code><span class="pln">            </span><span class="kwd">const</span><span class="pln"> isVisible </span><span class="pun">=</span></code></li><li class="L5" id="line296"><code><span class="pln">              previousItemsWidth </span><span class="pun">+</span><span class="pln"> incompressibleWidth </span><span class="pun">&lt;=</span><span class="pln"> wrapperWidth</span><span class="pun">;</span></code></li><li class="L6" id="line297"><code></code></li><li class="L7" id="line298"><code><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isVisible</span><span class="pun">)</span><span class="pln"> isPreviousItemVisible </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8" id="line299"><code></code></li><li class="L9" id="line300"><code><span class="pln">            </span><span class="kwd">return</span><span class="pln"> isVisible</span><span class="pun">;</span></code></li><li class="L0" id="line301"><code><span class="pln">          </span><span class="pun">})</span></code></li><li class="L1" id="line302"><code><span class="pln">          </span><span class="pun">.</span><span class="pln">reverse</span><span class="pun">();</span></code></li><li class="L2" id="line303"><code></code></li><li class="L3" id="line304"><code><span class="pln">        resolve</span><span class="pun">({</span></code></li><li class="L4" id="line305"><code><span class="pln">          expanded</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span></code></li><li class="L5" id="line306"><code><span class="pln">          isItemVisible</span><span class="pun">,</span></code></li><li class="L6" id="line307"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L7" id="line308"><code><span class="pln">      </span><span class="pun">},</span><span class="pln"> </span><span class="lit">150</span><span class="pun">);</span></code></li><li class="L8" id="line309"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L9" id="line310"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line311"><code><span class="pun">}</span></code></li><li class="L1" id="line312"><code></code></li><li class="L2" id="line313"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">Breadcrumb</span><span class="pun">;</span></code></li></ol></pre></article></section></div><br class="clear"><footer>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Thu Jul 04 2024 08:17:32 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.</footer><script>prettyPrint();</script><script src="scripts/polyfill.js"></script><script src="scripts/linenumber.js"></script></body></html>