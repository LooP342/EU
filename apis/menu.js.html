<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>menu.js - Documentation</title><script src="scripts/prettify/prettify.js"></script><script src="scripts/prettify/lang-css.js"></script><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link href="styles/prettify.css" rel="stylesheet" type="text/css"><link href="styles/jsdoc.css" rel="stylesheet" type="text/css"><script src="scripts/nav.js" defer></script><meta content="width=device-width,initial-scale=1" name="viewport"></head><body><input class="nav-trigger" id="nav-trigger" type="checkbox"> <label class="navicon-button x" for="nav-trigger"><div class="navicon"></div></label> <label class="overlay" for="nav-trigger"></label><nav><h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Menu.html">Menu</a><ul class="methods"><li data-type="method"><a href="Menu.html#checkMegaMenu">checkMegaMenu</a></li><li data-type="method"><a href="Menu.html#checkMenuItem">checkMenuItem</a></li><li data-type="method"><a href="Menu.html#checkMenuOverflow">checkMenuOverflow</a></li><li data-type="method"><a href="Menu.html#closeOpenDropdown">closeOpenDropdown</a></li><li data-type="method"><a href="Menu.html#destroy">destroy</a></li><li data-type="method"><a href="Menu.html#disableScroll">disableScroll</a></li><li data-type="method"><a href="Menu.html#enableScroll">enableScroll</a></li><li data-type="method"><a href="Menu.html#handleClickGlobal">handleClickGlobal</a></li><li data-type="method"><a href="Menu.html#handleClickOnBack">handleClickOnBack</a></li><li data-type="method"><a href="Menu.html#handleClickOnCaret">handleClickOnCaret</a></li><li data-type="method"><a href="Menu.html#handleClickOnClose">handleClickOnClose</a></li><li data-type="method"><a href="Menu.html#handleClickOnNextItems">handleClickOnNextItems</a></li><li data-type="method"><a href="Menu.html#handleClickOnOpen">handleClickOnOpen</a></li><li data-type="method"><a href="Menu.html#handleClickOnPreviousItems">handleClickOnPreviousItems</a></li><li data-type="method"><a href="Menu.html#handleClickOnToggle">handleClickOnToggle</a></li><li data-type="method"><a href="Menu.html#handleFocusIn">handleFocusIn</a></li><li data-type="method"><a href="Menu.html#handleHoverOffItem">handleHoverOffItem</a></li><li data-type="method"><a href="Menu.html#handleHoverOnItem">handleHoverOnItem</a></li><li data-type="method"><a href="Menu.html#handleKeyboard">handleKeyboard</a></li><li data-type="method"><a href="Menu.html#handleKeyboardGlobal">handleKeyboardGlobal</a></li><li data-type="method"><a href="Menu.html#handleResize">handleResize</a></li><li data-type="method"><a href="Menu.html#init">init</a></li><li data-type="method"><a href="Menu.html#on">on</a></li><li data-type="method"><a href="Menu.html#positionMenuOverlay">positionMenuOverlay</a></li><li data-type="method"><a href="Menu.html#trigger">trigger</a></li><li data-type="method"><a href="Menu.html#useDesktopDisplay">useDesktopDisplay</a></li><li data-type="method"><a href="Menu.html#.autoInit">autoInit</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="Menu.html#event:onClose">onClose</a></li><li><a href="Menu.html#event:onOpen">onOpen</a></li></ul></nav><div id="main"><h1 class="page-title">menu.js</h1><section><article><pre class="prettyprint source linenums"><ol class="linenums"><li class="L0" id="line1"><code><span class="kwd">import</span><span class="pln"> </span><span class="typ">Stickyfill</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'stickyfilljs'</span><span class="pun">;</span></code></li><li class="L1" id="line2"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> queryOne</span><span class="pun">,</span><span class="pln"> queryAll </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/dom-utils'</span><span class="pun">;</span></code></li><li class="L2" id="line3"><code><span class="kwd">import</span><span class="pln"> </span><span class="typ">EventManager</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/event-manager'</span><span class="pun">;</span></code></li><li class="L3" id="line4"><code><span class="kwd">import</span><span class="pln"> isMobile </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'mobile-device-detect'</span><span class="pun">;</span></code></li><li class="L4" id="line5"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> createFocusTrap </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'focus-trap'</span><span class="pun">;</span></code></li><li class="L5" id="line6"><code></code></li><li class="L6" id="line7"><code><span class="com">/**</span></code></li><li class="L7" id="line8"><code><span class="com"> * @param {HTMLElement} element DOM element for component instantiation and scope</span></code></li><li class="L8" id="line9"><code><span class="com"> * @param {Object} options</span></code></li><li class="L9" id="line10"><code><span class="com"> * @param {String} options.openSelector Selector for the hamburger button</span></code></li><li class="L0" id="line11"><code><span class="com"> * @param {String} options.closeSelector Selector for the close button</span></code></li><li class="L1" id="line12"><code><span class="com"> * @param {String} options.backSelector Selector for the back button</span></code></li><li class="L2" id="line13"><code><span class="com"> * @param {String} options.innerSelector Selector for the menu inner</span></code></li><li class="L3" id="line14"><code><span class="com"> * @param {String} options.listSelector Selector for the menu items list</span></code></li><li class="L4" id="line15"><code><span class="com"> * @param {String} options.itemSelector Selector for the menu item</span></code></li><li class="L5" id="line16"><code><span class="com"> * @param {String} options.linkSelector Selector for the menu link</span></code></li><li class="L6" id="line17"><code><span class="com"> * @param {String} options.buttonPreviousSelector Selector for the previous items button (for overflow)</span></code></li><li class="L7" id="line18"><code><span class="com"> * @param {String} options.buttonNextSelector Selector for the next items button (for overflow)</span></code></li><li class="L8" id="line19"><code><span class="com"> * @param {String} options.megaSelector Selector for the mega menu</span></code></li><li class="L9" id="line20"><code><span class="com"> * @param {String} options.subItemSelector Selector for the menu sub items</span></code></li><li class="L0" id="line21"><code><span class="com"> * @param {Int} options.maxLines Number of lines maximum for each menu item (for overflow). Set it to zero to disable automatic resize.</span></code></li><li class="L1" id="line22"><code><span class="com"> * @param {String} options.maxLinesAttribute The data attribute to set the max lines in the markup, if needed</span></code></li><li class="L2" id="line23"><code><span class="com"> * @param {String} options.labelOpenAttribute The data attribute for open label</span></code></li><li class="L3" id="line24"><code><span class="com"> * @param {String} options.labelCloseAttribute The data attribute for close label</span></code></li><li class="L4" id="line25"><code><span class="com"> * @param {Boolean} options.attachClickListener Whether or not to bind click events</span></code></li><li class="L5" id="line26"><code><span class="com"> * @param {Boolean} options.attachHoverListener Whether or not to bind hover events</span></code></li><li class="L6" id="line27"><code><span class="com"> * @param {Boolean} options.attachFocusListener Whether or not to bind focus events</span></code></li><li class="L7" id="line28"><code><span class="com"> * @param {Boolean} options.attachKeyListener Whether or not to bind keyboard events</span></code></li><li class="L8" id="line29"><code><span class="com"> * @param {Boolean} options.attachResizeListener Whether or not to bind resize events</span></code></li><li class="L9" id="line30"><code><span class="com"> */</span></code></li><li class="L0" id="line31"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Menu</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line32"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line33"><code><span class="com">   * @static</span></code></li><li class="L3" id="line34"><code><span class="com">   * Shorthand for instance creation and initialisation.</span></code></li><li class="L4" id="line35"><code><span class="com">   *</span></code></li><li class="L5" id="line36"><code><span class="com">   * @param {HTMLElement} root DOM element for component instantiation and scope</span></code></li><li class="L6" id="line37"><code><span class="com">   *</span></code></li><li class="L7" id="line38"><code><span class="com">   * @return {Menu} An instance of Menu.</span></code></li><li class="L8" id="line39"><code><span class="com">   */</span></code></li><li class="L9" id="line40"><code><span class="pln">  </span><span class="kwd">static</span><span class="pln"> autoInit</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> MENU</span><span class="pun">:</span><span class="pln"> defaultOptions </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{})</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line41"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menu </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Menu</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> defaultOptions</span><span class="pun">);</span></code></li><li class="L1" id="line42"><code><span class="pln">    menu</span><span class="pun">.</span><span class="pln">init</span><span class="pun">();</span></code></li><li class="L2" id="line43"><code><span class="pln">    root</span><span class="pun">.</span><span class="typ">ECLMenu</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> menu</span><span class="pun">;</span></code></li><li class="L3" id="line44"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> menu</span><span class="pun">;</span></code></li><li class="L4" id="line45"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line46"><code></code></li><li class="L6" id="line47"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line48"><code><span class="com">   *   @event Menu#onOpen</span></code></li><li class="L8" id="line49"><code><span class="com">   */</span></code></li><li class="L9" id="line50"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line51"><code><span class="com">   *   @event Menu#onClose</span></code></li><li class="L1" id="line52"><code><span class="com">   */</span></code></li><li class="L2" id="line53"><code></code></li><li class="L3" id="line54"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L4" id="line55"><code><span class="com">   * An array of supported events for this component.</span></code></li><li class="L5" id="line56"><code><span class="com">   *</span></code></li><li class="L6" id="line57"><code><span class="com">   * @type {Array&lt;string>}</span></code></li><li class="L7" id="line58"><code><span class="com">   * @memberof Menu</span></code></li><li class="L8" id="line59"><code><span class="com">   */</span></code></li><li class="L9" id="line60"><code><span class="pln">  supportedEvents </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'onOpen'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'onClose'</span><span class="pun">];</span></code></li><li class="L0" id="line61"><code></code></li><li class="L1" id="line62"><code><span class="pln">  constructor</span><span class="pun">(</span></code></li><li class="L2" id="line63"><code><span class="pln">    element</span><span class="pun">,</span></code></li><li class="L3" id="line64"><code><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4" id="line65"><code><span class="pln">      openSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-open]'</span><span class="pun">,</span></code></li><li class="L5" id="line66"><code><span class="pln">      closeSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-close]'</span><span class="pun">,</span></code></li><li class="L6" id="line67"><code><span class="pln">      backSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-back]'</span><span class="pun">,</span></code></li><li class="L7" id="line68"><code><span class="pln">      innerSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-inner]'</span><span class="pun">,</span></code></li><li class="L8" id="line69"><code><span class="pln">      listSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-list]'</span><span class="pun">,</span></code></li><li class="L9" id="line70"><code><span class="pln">      itemSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-item]'</span><span class="pun">,</span></code></li><li class="L0" id="line71"><code><span class="pln">      linkSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-link]'</span><span class="pun">,</span></code></li><li class="L1" id="line72"><code><span class="pln">      buttonPreviousSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-items-previous]'</span><span class="pun">,</span></code></li><li class="L2" id="line73"><code><span class="pln">      buttonNextSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-items-next]'</span><span class="pun">,</span></code></li><li class="L3" id="line74"><code><span class="pln">      caretSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-caret]'</span><span class="pun">,</span></code></li><li class="L4" id="line75"><code><span class="pln">      megaSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-mega]'</span><span class="pun">,</span></code></li><li class="L5" id="line76"><code><span class="pln">      subItemSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-menu-subitem]'</span><span class="pun">,</span></code></li><li class="L6" id="line77"><code><span class="pln">      maxLines </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span></code></li><li class="L7" id="line78"><code><span class="pln">      maxLinesAttribute </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-menu-max-lines'</span><span class="pun">,</span></code></li><li class="L8" id="line79"><code><span class="pln">      labelOpenAttribute </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-menu-label-open'</span><span class="pun">,</span></code></li><li class="L9" id="line80"><code><span class="pln">      labelCloseAttribute </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-menu-label-close'</span><span class="pun">,</span></code></li><li class="L0" id="line81"><code><span class="pln">      attachClickListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L1" id="line82"><code><span class="pln">      attachHoverListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L2" id="line83"><code><span class="pln">      attachFocusListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L3" id="line84"><code><span class="pln">      attachKeyListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L4" id="line85"><code><span class="pln">      attachResizeListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L5" id="line86"><code><span class="pln">      onCloseCallback </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span></code></li><li class="L6" id="line87"><code><span class="pln">      onOpenCallback </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span></code></li><li class="L7" id="line88"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{},</span></code></li><li class="L8" id="line89"><code><span class="pln">  </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line90"><code><span class="pln">    </span><span class="com">// Check element</span></code></li><li class="L0" id="line91"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">element </span><span class="pun">||</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">nodeType </span><span class="pun">!==</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">.</span><span class="pln">ELEMENT_NODE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line92"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span></code></li><li class="L2" id="line93"><code><span class="pln">        </span><span class="str">'DOM element should be given to initialize this widget.'</span><span class="pun">,</span></code></li><li class="L3" id="line94"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L4" id="line95"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line96"><code></code></li><li class="L6" id="line97"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L7" id="line98"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">eventManager </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">EventManager</span><span class="pun">();</span></code></li><li class="L8" id="line99"><code></code></li><li class="L9" id="line100"><code><span class="pln">    </span><span class="com">// Options</span></code></li><li class="L0" id="line101"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">openSelector </span><span class="pun">=</span><span class="pln"> openSelector</span><span class="pun">;</span></code></li><li class="L1" id="line102"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeSelector </span><span class="pun">=</span><span class="pln"> closeSelector</span><span class="pun">;</span></code></li><li class="L2" id="line103"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">backSelector </span><span class="pun">=</span><span class="pln"> backSelector</span><span class="pun">;</span></code></li><li class="L3" id="line104"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">innerSelector </span><span class="pun">=</span><span class="pln"> innerSelector</span><span class="pun">;</span></code></li><li class="L4" id="line105"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">listSelector </span><span class="pun">=</span><span class="pln"> listSelector</span><span class="pun">;</span></code></li><li class="L5" id="line106"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemSelector </span><span class="pun">=</span><span class="pln"> itemSelector</span><span class="pun">;</span></code></li><li class="L6" id="line107"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">linkSelector </span><span class="pun">=</span><span class="pln"> linkSelector</span><span class="pun">;</span></code></li><li class="L7" id="line108"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttonPreviousSelector </span><span class="pun">=</span><span class="pln"> buttonPreviousSelector</span><span class="pun">;</span></code></li><li class="L8" id="line109"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttonNextSelector </span><span class="pun">=</span><span class="pln"> buttonNextSelector</span><span class="pun">;</span></code></li><li class="L9" id="line110"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caretSelector </span><span class="pun">=</span><span class="pln"> caretSelector</span><span class="pun">;</span></code></li><li class="L0" id="line111"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">megaSelector </span><span class="pun">=</span><span class="pln"> megaSelector</span><span class="pun">;</span></code></li><li class="L1" id="line112"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItemSelector </span><span class="pun">=</span><span class="pln"> subItemSelector</span><span class="pun">;</span></code></li><li class="L2" id="line113"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">maxLines </span><span class="pun">=</span><span class="pln"> maxLines</span><span class="pun">;</span></code></li><li class="L3" id="line114"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">maxLinesAttribute </span><span class="pun">=</span><span class="pln"> maxLinesAttribute</span><span class="pun">;</span></code></li><li class="L4" id="line115"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">labelOpenAttribute </span><span class="pun">=</span><span class="pln"> labelOpenAttribute</span><span class="pun">;</span></code></li><li class="L5" id="line116"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">labelCloseAttribute </span><span class="pun">=</span><span class="pln"> labelCloseAttribute</span><span class="pun">;</span></code></li><li class="L6" id="line117"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">=</span><span class="pln"> attachClickListener</span><span class="pun">;</span></code></li><li class="L7" id="line118"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachHoverListener </span><span class="pun">=</span><span class="pln"> attachHoverListener</span><span class="pun">;</span></code></li><li class="L8" id="line119"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachFocusListener </span><span class="pun">=</span><span class="pln"> attachFocusListener</span><span class="pun">;</span></code></li><li class="L9" id="line120"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">=</span><span class="pln"> attachKeyListener</span><span class="pun">;</span></code></li><li class="L0" id="line121"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener </span><span class="pun">=</span><span class="pln"> attachResizeListener</span><span class="pun">;</span></code></li><li class="L1" id="line122"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onOpenCallback </span><span class="pun">=</span><span class="pln"> onOpenCallback</span><span class="pun">;</span></code></li><li class="L2" id="line123"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">onCloseCallback </span><span class="pun">=</span><span class="pln"> onCloseCallback</span><span class="pun">;</span></code></li><li class="L3" id="line124"><code></code></li><li class="L4" id="line125"><code><span class="pln">    </span><span class="com">// Private variables</span></code></li><li class="L5" id="line126"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ltr'</span><span class="pun">;</span></code></li><li class="L6" id="line127"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L7" id="line128"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L8" id="line129"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toggleLabel </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9" id="line130"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">back </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L0" id="line131"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">backItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L1" id="line132"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L2" id="line133"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L3" id="line134"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L4" id="line135"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L5" id="line136"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L6" id="line137"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L7" id="line138"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isOpen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8" id="line139"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9" id="line140"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isKeyEvent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L0" id="line141"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1" id="line142"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hasOverflow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L2" id="line143"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L3" id="line144"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L4" id="line145"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">currentItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L5" id="line146"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalItemsWidth </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L6" id="line147"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">breakpointL </span><span class="pun">=</span><span class="pln"> </span><span class="lit">996</span><span class="pun">;</span></code></li><li class="L7" id="line148"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">windowWidth </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L8" id="line149"><code></code></li><li class="L9" id="line150"><code><span class="pln">    </span><span class="com">// Bind `this` for use in callbacks</span></code></li><li class="L0" id="line151"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnOpen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnOpen</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L1" id="line152"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L2" id="line153"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnToggle </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnToggle</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L3" id="line154"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnBack </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnBack</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L4" id="line155"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextItems </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextItems</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L5" id="line156"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousItems </span><span class="pun">=</span></code></li><li class="L6" id="line157"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousItems</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L7" id="line158"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCaret </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCaret</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L8" id="line159"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickGlobal </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickGlobal</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L9" id="line160"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOnItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOnItem</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L0" id="line161"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOffItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOffItem</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L1" id="line162"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFocusIn </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFocusIn</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L2" id="line163"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L3" id="line164"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboardGlobal </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboardGlobal</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L4" id="line165"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L5" id="line166"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">useDesktopDisplay </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">useDesktopDisplay</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L6" id="line167"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuOverflow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuOverflow</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L7" id="line168"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuItem</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L8" id="line169"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMegaMenu </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMegaMenu</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L9" id="line170"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeOpenDropdown </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeOpenDropdown</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L0" id="line171"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">positionMenuOverlay </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">positionMenuOverlay</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L1" id="line172"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">disableScroll </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">disableScroll</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L2" id="line173"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">enableScroll </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">enableScroll</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L3" id="line174"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L4" id="line175"><code></code></li><li class="L5" id="line176"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line177"><code><span class="com">   * Initialise component.</span></code></li><li class="L7" id="line178"><code><span class="com">   */</span></code></li><li class="L8" id="line179"><code><span class="pln">  init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line180"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">ECL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line181"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span><span class="str">'Called init but ECL is not present'</span><span class="pun">);</span></code></li><li class="L1" id="line182"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line183"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">=</span><span class="pln"> ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L3" id="line184"><code><span class="pln">    </span><span class="com">// Check display</span></code></li><li class="L4" id="line185"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">=</span><span class="pln"> getComputedStyle</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">).</span><span class="pln">direction</span><span class="pun">;</span></code></li><li class="L5" id="line186"><code></code></li><li class="L6" id="line187"><code><span class="pln">    </span><span class="com">// Query elements</span></code></li><li class="L7" id="line188"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">openSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L8" id="line189"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L9" id="line190"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toggleLabel </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-link__label'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open</span><span class="pun">);</span></code></li><li class="L0" id="line191"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">back </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">backSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L1" id="line192"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">innerSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L2" id="line193"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">listSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L3" id="line194"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttonPreviousSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L4" id="line195"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttonNextSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L5" id="line196"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L6" id="line197"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItems </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItemSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L7" id="line198"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">linkSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L8" id="line199"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caretSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L9" id="line200"><code></code></li><li class="L0" id="line201"><code><span class="pln">    </span><span class="com">// Get extra parameter from markup</span></code></li><li class="L1" id="line202"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> maxLinesMarkup </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">maxLinesAttribute</span><span class="pun">);</span></code></li><li class="L2" id="line203"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">maxLinesMarkup</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line204"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">maxLines </span><span class="pun">=</span><span class="pln"> maxLinesMarkup</span><span class="pun">;</span></code></li><li class="L4" id="line205"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line206"><code></code></li><li class="L6" id="line207"><code><span class="pln">    </span><span class="com">// Check if we should use desktop display (it does not rely only on breakpoints)</span></code></li><li class="L7" id="line208"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">useDesktopDisplay</span><span class="pun">();</span></code></li><li class="L8" id="line209"><code></code></li><li class="L9" id="line210"><code><span class="pln">    </span><span class="com">// Bind click events on buttons</span></code></li><li class="L0" id="line211"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line212"><code><span class="pln">      </span><span class="com">// Open</span></code></li><li class="L2" id="line213"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line214"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnToggle</span><span class="pun">);</span></code></li><li class="L4" id="line215"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line216"><code></code></li><li class="L6" id="line217"><code><span class="pln">      </span><span class="com">// Close</span></code></li><li class="L7" id="line218"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line219"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose</span><span class="pun">);</span></code></li><li class="L9" id="line220"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line221"><code></code></li><li class="L1" id="line222"><code><span class="pln">      </span><span class="com">// Back</span></code></li><li class="L2" id="line223"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">back</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line224"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">back</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnBack</span><span class="pun">);</span></code></li><li class="L4" id="line225"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line226"><code></code></li><li class="L6" id="line227"><code><span class="pln">      </span><span class="com">// Previous items</span></code></li><li class="L7" id="line228"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line229"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span></code></li><li class="L9" id="line230"><code><span class="pln">          </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L0" id="line231"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousItems</span><span class="pun">,</span></code></li><li class="L1" id="line232"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L2" id="line233"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line234"><code></code></li><li class="L4" id="line235"><code><span class="pln">      </span><span class="com">// Next items</span></code></li><li class="L5" id="line236"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line237"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextItems</span><span class="pun">);</span></code></li><li class="L7" id="line238"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L8" id="line239"><code></code></li><li class="L9" id="line240"><code><span class="pln">      </span><span class="com">// Global click</span></code></li><li class="L0" id="line241"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line242"><code><span class="pln">        document</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickGlobal</span><span class="pun">);</span></code></li><li class="L2" id="line243"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line244"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line245"><code></code></li><li class="L5" id="line246"><code><span class="pln">    </span><span class="com">// Bind event on menu links</span></code></li><li class="L6" id="line247"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line248"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">link</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line249"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachFocusListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line250"><code><span class="pln">          link</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'focusin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeOpenDropdown</span><span class="pun">);</span></code></li><li class="L0" id="line251"><code><span class="pln">          link</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'focusin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFocusIn</span><span class="pun">);</span></code></li><li class="L1" id="line252"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2" id="line253"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line254"><code><span class="pln">          link</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L4" id="line255"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line256"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L6" id="line257"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line258"><code></code></li><li class="L8" id="line259"><code><span class="pln">    </span><span class="com">// Bind event on caret buttons</span></code></li><li class="L9" id="line260"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line261"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">caret</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line262"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachFocusListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line263"><code><span class="pln">          caret</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'focusin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFocusIn</span><span class="pun">);</span></code></li><li class="L3" id="line264"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4" id="line265"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line266"><code><span class="pln">          caret</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L6" id="line267"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7" id="line268"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line269"><code><span class="pln">          caret</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCaret</span><span class="pun">);</span></code></li><li class="L9" id="line270"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0" id="line271"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L1" id="line272"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line273"><code></code></li><li class="L3" id="line274"><code><span class="pln">    </span><span class="com">// Bind event on sub menu links</span></code></li><li class="L4" id="line275"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItems</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line276"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">subItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line277"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> subLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__sublink'</span><span class="pun">,</span><span class="pln"> subItem</span><span class="pun">);</span></code></li><li class="L7" id="line278"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">&&</span><span class="pln"> subLink</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line279"><code><span class="pln">          subLink</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L9" id="line280"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0" id="line281"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L1" id="line282"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line283"><code></code></li><li class="L3" id="line284"><code><span class="pln">    </span><span class="com">// Bind global keyboard events</span></code></li><li class="L4" id="line285"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line286"><code><span class="pln">      document</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboardGlobal</span><span class="pun">);</span></code></li><li class="L6" id="line287"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line288"><code></code></li><li class="L8" id="line289"><code><span class="pln">    </span><span class="com">// Bind resize events</span></code></li><li class="L9" id="line290"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line291"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">windowWidth </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">innerWidth</span><span class="pun">;</span></code></li><li class="L1" id="line292"><code><span class="pln">      window</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'resize'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">);</span></code></li><li class="L2" id="line293"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line294"><code></code></li><li class="L4" id="line295"><code><span class="pln">    </span><span class="com">// Browse first level items</span></code></li><li class="L5" id="line296"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line297"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line298"><code><span class="pln">        </span><span class="com">// Check menu item display (right to left, full width, ...)</span></code></li><li class="L8" id="line299"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuItem</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L9" id="line300"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalItemsWidth </span><span class="pun">+=</span><span class="pln"> item</span><span class="pun">.</span><span class="pln">offsetWidth</span><span class="pun">;</span></code></li><li class="L0" id="line301"><code></code></li><li class="L1" id="line302"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">item</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="str">'data-ecl-has-children'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line303"><code><span class="pln">          </span><span class="com">// Bind hover and focus events on menu items</span></code></li><li class="L3" id="line304"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachHoverListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line305"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'mouseover'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOnItem</span><span class="pun">);</span></code></li><li class="L5" id="line306"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'mouseout'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOffItem</span><span class="pun">);</span></code></li><li class="L6" id="line307"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L7" id="line308"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8" id="line309"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L9" id="line310"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line311"><code></code></li><li class="L1" id="line312"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">positionMenuOverlay</span><span class="pun">();</span></code></li><li class="L2" id="line313"><code></code></li><li class="L3" id="line314"><code><span class="pln">    </span><span class="com">// Update overflow display</span></code></li><li class="L4" id="line315"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuOverflow</span><span class="pun">();</span></code></li><li class="L5" id="line316"><code></code></li><li class="L6" id="line317"><code><span class="pln">    </span><span class="com">// Check if the current item is hidden (one side or the other)</span></code></li><li class="L7" id="line318"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">currentItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line319"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L9" id="line320"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">currentItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">===</span><span class="pln"> </span><span class="str">'false'</span></code></li><li class="L0" id="line321"><code><span class="pln">      </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line322"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--current'</span><span class="pun">);</span></code></li><li class="L2" id="line323"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line324"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--current'</span><span class="pun">);</span></code></li><li class="L4" id="line325"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line326"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line327"><code></code></li><li class="L7" id="line328"><code><span class="pln">    </span><span class="com">// Init sticky header</span></code></li><li class="L8" id="line329"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">stickyInstance </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Stickyfill</span><span class="pun">.</span><span class="typ">Sticky</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L9" id="line330"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap </span><span class="pun">=</span><span class="pln"> createFocusTrap</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line331"><code><span class="pln">      onActivate</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'trap-is-active'</span><span class="pun">),</span></code></li><li class="L1" id="line332"><code><span class="pln">      onDeactivate</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'trap-is-active'</span><span class="pun">),</span></code></li><li class="L2" id="line333"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L3" id="line334"><code></code></li><li class="L4" id="line335"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line336"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu--rtl'</span><span class="pun">);</span></code></li><li class="L6" id="line337"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line338"><code></code></li><li class="L8" id="line339"><code><span class="pln">    </span><span class="com">// Hack to prevent css transition to be played on page load on chrome</span></code></li><li class="L9" id="line340"><code><span class="pln">    setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line341"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu--transition'</span><span class="pun">);</span></code></li><li class="L1" id="line342"><code><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="lit">500</span><span class="pun">);</span></code></li><li class="L2" id="line343"><code></code></li><li class="L3" id="line344"><code><span class="pln">    </span><span class="com">// Set ecl initialized attribute</span></code></li><li class="L4" id="line345"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L5" id="line346"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L6" id="line347"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L7" id="line348"><code></code></li><li class="L8" id="line349"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L9" id="line350"><code><span class="com">   * Register a callback function for a specific event.</span></code></li><li class="L0" id="line351"><code><span class="com">   *</span></code></li><li class="L1" id="line352"><code><span class="com">   * @param {string} eventName - The name of the event to listen for.</span></code></li><li class="L2" id="line353"><code><span class="com">   * @param {Function} callback - The callback function to be invoked when the event occurs.</span></code></li><li class="L3" id="line354"><code><span class="com">   * @returns {void}</span></code></li><li class="L4" id="line355"><code><span class="com">   * @memberof Menu</span></code></li><li class="L5" id="line356"><code><span class="com">   * @instance</span></code></li><li class="L6" id="line357"><code><span class="com">   *</span></code></li><li class="L7" id="line358"><code><span class="com">   * @example</span></code></li><li class="L8" id="line359"><code><span class="com">   * // Registering a callback for the 'onOpen' event</span></code></li><li class="L9" id="line360"><code><span class="com">   * menu.on('onOpen', (event) => {</span></code></li><li class="L0" id="line361"><code><span class="com">   *   console.log('Open event occurred!', event);</span></code></li><li class="L1" id="line362"><code><span class="com">   * });</span></code></li><li class="L2" id="line363"><code><span class="com">   */</span></code></li><li class="L3" id="line364"><code><span class="pln">  on</span><span class="pun">(</span><span class="pln">eventName</span><span class="pun">,</span><span class="pln"> callback</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line365"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">eventManager</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="pln">eventName</span><span class="pun">,</span><span class="pln"> callback</span><span class="pun">);</span></code></li><li class="L5" id="line366"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line367"><code></code></li><li class="L7" id="line368"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line369"><code><span class="com">   * Trigger a component event.</span></code></li><li class="L9" id="line370"><code><span class="com">   *</span></code></li><li class="L0" id="line371"><code><span class="com">   * @param {string} eventName - The name of the event to trigger.</span></code></li><li class="L1" id="line372"><code><span class="com">   * @param {any} eventData - Data associated with the event.</span></code></li><li class="L2" id="line373"><code><span class="com">   * @memberof Menu</span></code></li><li class="L3" id="line374"><code><span class="com">   */</span></code></li><li class="L4" id="line375"><code><span class="pln">  trigger</span><span class="pun">(</span><span class="pln">eventName</span><span class="pun">,</span><span class="pln"> eventData</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line376"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">eventManager</span><span class="pun">.</span><span class="pln">trigger</span><span class="pun">(</span><span class="pln">eventName</span><span class="pun">,</span><span class="pln"> eventData</span><span class="pun">);</span></code></li><li class="L6" id="line377"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L7" id="line378"><code></code></li><li class="L8" id="line379"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L9" id="line380"><code><span class="com">   * Destroy component.</span></code></li><li class="L0" id="line381"><code><span class="com">   */</span></code></li><li class="L1" id="line382"><code><span class="pln">  destroy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line383"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">stickyInstance</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line384"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">stickyInstance</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">();</span></code></li><li class="L4" id="line385"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line386"><code></code></li><li class="L6" id="line387"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line388"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line389"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnToggle</span><span class="pun">);</span></code></li><li class="L9" id="line390"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line391"><code></code></li><li class="L1" id="line392"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line393"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose</span><span class="pun">);</span></code></li><li class="L3" id="line394"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line395"><code></code></li><li class="L5" id="line396"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">back</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line397"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">back</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnBack</span><span class="pun">);</span></code></li><li class="L7" id="line398"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L8" id="line399"><code></code></li><li class="L9" id="line400"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line401"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span></code></li><li class="L1" id="line402"><code><span class="pln">          </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L2" id="line403"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousItems</span><span class="pun">,</span></code></li><li class="L3" id="line404"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L4" id="line405"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line406"><code></code></li><li class="L6" id="line407"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line408"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextItems</span><span class="pun">);</span></code></li><li class="L8" id="line409"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line410"><code></code></li><li class="L0" id="line411"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line412"><code><span class="pln">        document</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickGlobal</span><span class="pun">);</span></code></li><li class="L2" id="line413"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line414"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line415"><code></code></li><li class="L5" id="line416"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line417"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">caret</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line418"><code><span class="pln">        caret</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L8" id="line419"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L9" id="line420"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line421"><code></code></li><li class="L1" id="line422"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line423"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line424"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">item</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="str">'data-ecl-has-children'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line425"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachHoverListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line426"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'mouseover'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOnItem</span><span class="pun">);</span></code></li><li class="L6" id="line427"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'mouseout'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOffItem</span><span class="pun">);</span></code></li><li class="L7" id="line428"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L8" id="line429"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9" id="line430"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L0" id="line431"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line432"><code></code></li><li class="L2" id="line433"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line434"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">link</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line435"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachFocusListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line436"><code><span class="pln">          link</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'focusin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeOpenDropdown</span><span class="pun">);</span></code></li><li class="L6" id="line437"><code><span class="pln">          link</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'focusin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFocusIn</span><span class="pun">);</span></code></li><li class="L7" id="line438"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8" id="line439"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line440"><code><span class="pln">          link</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L0" id="line441"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1" id="line442"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L2" id="line443"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line444"><code></code></li><li class="L4" id="line445"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line446"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">caret</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line447"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachFocusListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line448"><code><span class="pln">          caret</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'focusin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleFocusIn</span><span class="pun">);</span></code></li><li class="L8" id="line449"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9" id="line450"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line451"><code><span class="pln">          caret</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L1" id="line452"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2" id="line453"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line454"><code><span class="pln">          caret</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCaret</span><span class="pun">);</span></code></li><li class="L4" id="line455"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line456"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L6" id="line457"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line458"><code></code></li><li class="L8" id="line459"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItems</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line460"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">subItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line461"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> subLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__sublink'</span><span class="pun">,</span><span class="pln"> subItem</span><span class="pun">);</span></code></li><li class="L1" id="line462"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">&&</span><span class="pln"> subLink</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line463"><code><span class="pln">          subLink</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L3" id="line464"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4" id="line465"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L5" id="line466"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line467"><code></code></li><li class="L7" id="line468"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line469"><code><span class="pln">      document</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboardGlobal</span><span class="pun">);</span></code></li><li class="L9" id="line470"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line471"><code></code></li><li class="L1" id="line472"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line473"><code><span class="pln">      window</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'resize'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">);</span></code></li><li class="L3" id="line474"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line475"><code></code></li><li class="L5" id="line476"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line477"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">);</span></code></li><li class="L7" id="line478"><code><span class="pln">      ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L8" id="line479"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line480"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line481"><code></code></li><li class="L1" id="line482"><code><span class="pln">  </span><span class="com">/* eslint-disable class-methods-use-this */</span></code></li><li class="L2" id="line483"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L3" id="line484"><code><span class="com">   * Disable page scrolling</span></code></li><li class="L4" id="line485"><code><span class="com">   */</span></code></li><li class="L5" id="line486"><code><span class="pln">  disableScroll</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line487"><code><span class="pln">    document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'no-scroll'</span><span class="pun">);</span></code></li><li class="L7" id="line488"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8" id="line489"><code></code></li><li class="L9" id="line490"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line491"><code><span class="com">   * Enable page scrolling</span></code></li><li class="L1" id="line492"><code><span class="com">   */</span></code></li><li class="L2" id="line493"><code><span class="pln">  enableScroll</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line494"><code><span class="pln">    document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'no-scroll'</span><span class="pun">);</span></code></li><li class="L4" id="line495"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line496"><code><span class="pln">  </span><span class="com">/* eslint-enable class-methods-use-this */</span></code></li><li class="L6" id="line497"><code></code></li><li class="L7" id="line498"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line499"><code><span class="com">   * Check if desktop display has to be used</span></code></li><li class="L9" id="line500"><code><span class="com">   * - not using a phone or tablet (whatever the screen size is)</span></code></li><li class="L0" id="line501"><code><span class="com">   * - not having hamburger menu on screen</span></code></li><li class="L1" id="line502"><code><span class="com">   */</span></code></li><li class="L2" id="line503"><code><span class="pln">  useDesktopDisplay</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line504"><code><span class="pln">    </span><span class="com">// Detect mobile devices</span></code></li><li class="L4" id="line505"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isMobile</span><span class="pun">.</span><span class="pln">isMobileOnly</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line506"><code><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L6" id="line507"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line508"><code></code></li><li class="L8" id="line509"><code><span class="pln">    </span><span class="com">// Force mobile display on tablet</span></code></li><li class="L9" id="line510"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isMobile</span><span class="pun">.</span><span class="pln">isTablet</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line511"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu--forced-mobile'</span><span class="pun">);</span></code></li><li class="L1" id="line512"><code><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L2" id="line513"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line514"><code></code></li><li class="L4" id="line515"><code><span class="pln">    </span><span class="com">// After all that, check if the hamburger button is displayed</span></code></li><li class="L5" id="line516"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">window</span><span class="pun">.</span><span class="pln">innerWidth </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">breakpointL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line517"><code><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L7" id="line518"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8" id="line519"><code></code></li><li class="L9" id="line520"><code><span class="pln">    </span><span class="com">// Everything is fine to use desktop display</span></code></li><li class="L0" id="line521"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu--forced-mobile'</span><span class="pun">);</span></code></li><li class="L1" id="line522"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L2" id="line523"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L3" id="line524"><code></code></li><li class="L4" id="line525"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L5" id="line526"><code><span class="com">   * Trigger events on resize</span></code></li><li class="L6" id="line527"><code><span class="com">   * Uses a debounce, for performance</span></code></li><li class="L7" id="line528"><code><span class="com">   */</span></code></li><li class="L8" id="line529"><code><span class="pln">  handleResize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line530"><code><span class="pln">    </span><span class="com">// Do not trigger the resize event if not needed (when scrolling on mobile)</span></code></li><li class="L0" id="line531"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">window</span><span class="pun">.</span><span class="pln">innerWidth </span><span class="pun">!==</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">windowWidth</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line532"><code><span class="pln">      </span><span class="com">// Scroll to top to ensure the menu is correctly positioned.</span></code></li><li class="L2" id="line533"><code><span class="pln">      document</span><span class="pun">.</span><span class="pln">documentElement</span><span class="pun">.</span><span class="pln">scrollTop </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L3" id="line534"><code><span class="pln">      document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">scrollTop </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L4" id="line535"><code></code></li><li class="L5" id="line536"><code><span class="pln">      </span><span class="com">// Disable transition</span></code></li><li class="L6" id="line537"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu--transition'</span><span class="pun">);</span></code></li><li class="L7" id="line538"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line539"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu--rtl'</span><span class="pun">);</span></code></li><li class="L9" id="line540"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line541"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu--rtl'</span><span class="pun">);</span></code></li><li class="L1" id="line542"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L2" id="line543"><code></code></li><li class="L3" id="line544"><code><span class="pln">      clearTimeout</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer</span><span class="pun">);</span></code></li><li class="L4" id="line545"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer </span><span class="pun">=</span><span class="pln"> setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line546"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu--forced-mobile'</span><span class="pun">);</span></code></li><li class="L6" id="line547"><code></code></li><li class="L7" id="line548"><code><span class="pln">        </span><span class="com">// Check global display</span></code></li><li class="L8" id="line549"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">useDesktopDisplay</span><span class="pun">();</span></code></li><li class="L9" id="line550"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line551"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap</span><span class="pun">.</span><span class="pln">deactivate</span><span class="pun">();</span></code></li><li class="L1" id="line552"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2" id="line553"><code><span class="pln">        </span><span class="com">// Update items display</span></code></li><li class="L3" id="line554"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalItemsWidth </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L4" id="line555"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line556"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line557"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuItem</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L7" id="line558"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalItemsWidth </span><span class="pun">+=</span><span class="pln"> item</span><span class="pun">.</span><span class="pln">offsetWidth</span><span class="pun">;</span></code></li><li class="L8" id="line559"><code><span class="pln">          </span><span class="pun">});</span></code></li><li class="L9" id="line560"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0" id="line561"><code></code></li><li class="L1" id="line562"><code><span class="pln">        </span><span class="com">// Update overflow display</span></code></li><li class="L2" id="line563"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuOverflow</span><span class="pun">();</span></code></li><li class="L3" id="line564"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">positionMenuOverlay</span><span class="pun">();</span></code></li><li class="L4" id="line565"><code></code></li><li class="L5" id="line566"><code><span class="pln">        </span><span class="com">// Bring transition back</span></code></li><li class="L6" id="line567"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu--transition'</span><span class="pun">);</span></code></li><li class="L7" id="line568"><code></code></li><li class="L8" id="line569"><code><span class="pln">        </span><span class="com">// Update saved width</span></code></li><li class="L9" id="line570"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">windowWidth </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">innerWidth</span><span class="pun">;</span></code></li><li class="L0" id="line571"><code><span class="pln">      </span><span class="pun">},</span><span class="pln"> </span><span class="lit">200</span><span class="pun">);</span></code></li><li class="L1" id="line572"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line573"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L3" id="line574"><code></code></li><li class="L4" id="line575"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L5" id="line576"><code><span class="com">   * Dinamically set the position of the menu overlay</span></code></li><li class="L6" id="line577"><code><span class="com">   */</span></code></li><li class="L7" id="line578"><code><span class="pln">  positionMenuOverlay</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line579"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuOverlay </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__overlay'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L9" id="line580"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line581"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isOpen</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line582"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">disableScroll</span><span class="pun">();</span></code></li><li class="L2" id="line583"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line584"><code><span class="pln">      setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line585"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> header </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-site-header__header'</span><span class="pun">,</span><span class="pln"> document</span><span class="pun">);</span></code></li><li class="L5" id="line586"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">header</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line587"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> position </span><span class="pun">=</span><span class="pln"> header</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">();</span></code></li><li class="L7" id="line588"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> bottomPosition </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">round</span><span class="pun">(</span><span class="pln">position</span><span class="pun">.</span><span class="pln">bottom</span><span class="pun">);</span></code></li><li class="L8" id="line589"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuOverlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line590"><code><span class="pln">            menuOverlay</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">top </span><span class="pun">=</span><span class="pln"> </span><span class="str">`${bottomPosition}px`</span><span class="pun">;</span></code></li><li class="L0" id="line591"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L1" id="line592"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line593"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">top </span><span class="pun">=</span><span class="pln"> </span><span class="str">`${bottomPosition}px`</span><span class="pun">;</span></code></li><li class="L3" id="line594"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L4" id="line595"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line596"><code><span class="pln">      </span><span class="pun">},</span><span class="pln"> </span><span class="lit">500</span><span class="pun">);</span></code></li><li class="L6" id="line597"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line598"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">enableScroll</span><span class="pun">();</span></code></li><li class="L8" id="line599"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line600"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">top </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L0" id="line601"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L1" id="line602"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuOverlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line603"><code><span class="pln">        menuOverlay</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">top </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L3" id="line604"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line605"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line606"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line607"><code></code></li><li class="L7" id="line608"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line609"><code><span class="com">   * Check how to display menu horizontally and manage overflow</span></code></li><li class="L9" id="line610"><code><span class="com">   */</span></code></li><li class="L0" id="line611"><code><span class="pln">  checkMenuOverflow</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line612"><code><span class="pln">    </span><span class="com">// Backward compatibility</span></code></li><li class="L2" id="line613"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line614"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__list'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L4" id="line615"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line616"><code></code></li><li class="L6" id="line617"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L7" id="line618"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList </span><span class="pun">||</span></code></li><li class="L8" id="line619"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner </span><span class="pun">||</span></code></li><li class="L9" id="line620"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext </span><span class="pun">||</span></code></li><li class="L0" id="line621"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious </span><span class="pun">||</span></code></li><li class="L1" id="line622"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span></code></li><li class="L2" id="line623"><code><span class="pln">    </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line624"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L4" id="line625"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line626"><code></code></li><li class="L6" id="line627"><code><span class="pln">    </span><span class="com">// Check if the menu is too large</span></code></li><li class="L7" id="line628"><code><span class="pln">    </span><span class="com">// We take some margin for safety (same margin as the container's padding)</span></code></li><li class="L8" id="line629"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hasOverflow </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalItemsWidth </span><span class="pun">></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">offsetWidth </span><span class="pun">+</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span></code></li><li class="L9" id="line630"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hasOverflow </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line631"><code><span class="pln">      </span><span class="com">// Reset values related to overflow</span></code></li><li class="L1" id="line632"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line633"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'none'</span><span class="pun">;</span></code></li><li class="L3" id="line634"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line635"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line636"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'none'</span><span class="pun">;</span></code></li><li class="L6" id="line637"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L7" id="line638"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line639"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="str">'0'</span><span class="pun">;</span></code></li><li class="L9" id="line640"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line641"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line642"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__inner--has-overflow'</span><span class="pun">);</span></code></li><li class="L2" id="line643"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line644"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L4" id="line645"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalItemsWidth </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L5" id="line646"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L6" id="line647"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L7" id="line648"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8" id="line649"><code></code></li><li class="L9" id="line650"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line651"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__inner--has-overflow'</span><span class="pun">);</span></code></li><li class="L1" id="line652"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line653"><code></code></li><li class="L3" id="line654"><code><span class="pln">    </span><span class="com">// Reset visibility indicator</span></code></li><li class="L4" id="line655"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line656"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line657"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">);</span></code></li><li class="L7" id="line658"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L8" id="line659"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line660"><code></code></li><li class="L0" id="line661"><code><span class="pln">    </span><span class="com">// First case: overflow to the end</span></code></li><li class="L1" id="line662"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line663"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'block'</span><span class="pun">;</span></code></li><li class="L3" id="line664"><code></code></li><li class="L4" id="line665"><code><span class="pln">      </span><span class="com">// Get visible items</span></code></li><li class="L5" id="line666"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line667"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">every</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line668"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L8" id="line669"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">left </span><span class="pun">&lt;</span></code></li><li class="L9" id="line670"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">left</span></code></li><li class="L0" id="line671"><code><span class="pln">          </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line672"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem </span><span class="pun">=</span><span class="pln"> item</span><span class="pun">;</span></code></li><li class="L2" id="line673"><code><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L3" id="line674"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L4" id="line675"><code><span class="pln">          item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L5" id="line676"><code><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L6" id="line677"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L7" id="line678"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line679"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">every</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line680"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L0" id="line681"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">right </span><span class="pun">></span></code></li><li class="L1" id="line682"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">right</span></code></li><li class="L2" id="line683"><code><span class="pln">          </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line684"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem </span><span class="pun">=</span><span class="pln"> item</span><span class="pun">;</span></code></li><li class="L4" id="line685"><code><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L5" id="line686"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L6" id="line687"><code><span class="pln">          item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L7" id="line688"><code><span class="pln">          </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L8" id="line689"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L9" id="line690"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line691"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line692"><code><span class="pln">    </span><span class="com">// Second case: overflow to the begining</span></code></li><li class="L2" id="line693"><code><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line694"><code><span class="pln">      </span><span class="com">// Get visible items</span></code></li><li class="L4" id="line695"><code><span class="pln">      </span><span class="com">// eslint-disable-next-line no-lonely-if</span></code></li><li class="L5" id="line696"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line697"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line698"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L8" id="line699"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">right </span><span class="pun">&lt;=</span></code></li><li class="L9" id="line700"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">right</span></code></li><li class="L0" id="line701"><code><span class="pln">          </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line702"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L2" id="line703"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L3" id="line704"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L4" id="line705"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line706"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line707"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L7" id="line708"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">left </span><span class="pun">>=</span></code></li><li class="L8" id="line709"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">left</span></code></li><li class="L9" id="line710"><code><span class="pln">          </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line711"><code><span class="pln">            item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L1" id="line712"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L2" id="line713"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L3" id="line714"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line715"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line716"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line717"><code></code></li><li class="L7" id="line718"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line719"><code><span class="com">   * Check for a specific menu item how to display it:</span></code></li><li class="L9" id="line720"><code><span class="com">   * - number of lines</span></code></li><li class="L0" id="line721"><code><span class="com">   * - mega menu position</span></code></li><li class="L1" id="line722"><code><span class="com">   *</span></code></li><li class="L2" id="line723"><code><span class="com">   * @param {Node} menuItem</span></code></li><li class="L3" id="line724"><code><span class="com">   */</span></code></li><li class="L4" id="line725"><code><span class="pln">  checkMenuItem</span><span class="pun">(</span><span class="pln">menuItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line726"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">linkSelector</span><span class="pun">,</span><span class="pln"> menuItem</span><span class="pun">);</span></code></li><li class="L6" id="line727"><code></code></li><li class="L7" id="line728"><code><span class="pln">    </span><span class="com">// Save current menu item</span></code></li><li class="L8" id="line729"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__item--current'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line730"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">currentItem </span><span class="pun">=</span><span class="pln"> menuItem</span><span class="pun">;</span></code></li><li class="L0" id="line731"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line732"><code></code></li><li class="L2" id="line733"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line734"><code><span class="pln">      menuLink</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> </span><span class="str">'auto'</span><span class="pun">;</span></code></li><li class="L4" id="line735"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L5" id="line736"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line737"><code></code></li><li class="L7" id="line738"><code><span class="pln">    </span><span class="com">// Check if line management has been disabled by user</span></code></li><li class="L8" id="line739"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">maxLines </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L9" id="line740"><code></code></li><li class="L0" id="line741"><code><span class="pln">    </span><span class="com">// Handle menu item height and width (n "lines" max)</span></code></li><li class="L1" id="line742"><code><span class="pln">    </span><span class="com">// Max height: n * line-height + padding</span></code></li><li class="L2" id="line743"><code><span class="pln">    </span><span class="com">// We need to temporally change item alignments to get the height</span></code></li><li class="L3" id="line744"><code><span class="pln">    menuItem</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">alignItems </span><span class="pun">=</span><span class="pln"> </span><span class="str">'flex-start'</span><span class="pun">;</span></code></li><li class="L4" id="line745"><code><span class="pln">    let linkWidth </span><span class="pun">=</span><span class="pln"> menuLink</span><span class="pun">.</span><span class="pln">offsetWidth</span><span class="pun">;</span></code></li><li class="L5" id="line746"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> linkStyle </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">getComputedStyle</span><span class="pun">(</span><span class="pln">menuLink</span><span class="pun">);</span></code></li><li class="L6" id="line747"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> maxHeight </span><span class="pun">=</span></code></li><li class="L7" id="line748"><code><span class="pln">      parseInt</span><span class="pun">(</span><span class="pln">linkStyle</span><span class="pun">.</span><span class="pln">lineHeight</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">maxLines </span><span class="pun">+</span></code></li><li class="L8" id="line749"><code><span class="pln">      parseInt</span><span class="pun">(</span><span class="pln">linkStyle</span><span class="pun">.</span><span class="pln">paddingTop</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span></code></li><li class="L9" id="line750"><code><span class="pln">      parseInt</span><span class="pun">(</span><span class="pln">linkStyle</span><span class="pun">.</span><span class="pln">paddingBottom</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">);</span></code></li><li class="L0" id="line751"><code></code></li><li class="L1" id="line752"><code><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuLink</span><span class="pun">.</span><span class="pln">offsetHeight </span><span class="pun">></span><span class="pln"> maxHeight</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line753"><code><span class="pln">      menuLink</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> </span><span class="str">`${(linkWidth += 1)}px`</span><span class="pun">;</span></code></li><li class="L3" id="line754"><code></code></li><li class="L4" id="line755"><code><span class="pln">      </span><span class="com">// Safety exit</span></code></li><li class="L5" id="line756"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">linkWidth </span><span class="pun">></span><span class="pln"> </span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">break</span><span class="pun">;</span></code></li><li class="L6" id="line757"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line758"><code><span class="pln">    menuItem</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">alignItems </span><span class="pun">=</span><span class="pln"> </span><span class="str">'unset'</span><span class="pun">;</span></code></li><li class="L8" id="line759"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L9" id="line760"><code></code></li><li class="L0" id="line761"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L1" id="line762"><code><span class="com">   * Handle positioning of mega menu</span></code></li><li class="L2" id="line763"><code><span class="com">   * @param {Node} menuItem</span></code></li><li class="L3" id="line764"><code><span class="com">   */</span></code></li><li class="L4" id="line765"><code><span class="pln">  checkMegaMenu</span><span class="pun">(</span><span class="pln">menuItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line766"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuMega </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">megaSelector</span><span class="pun">,</span><span class="pln"> menuItem</span><span class="pun">);</span></code></li><li class="L6" id="line767"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuMega </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line768"><code><span class="pln">      </span><span class="com">// Check number of items and put them in column</span></code></li><li class="L8" id="line769"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> subItems </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subItemSelector</span><span class="pun">,</span><span class="pln"> menuMega</span><span class="pun">);</span></code></li><li class="L9" id="line770"><code></code></li><li class="L0" id="line771"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">subItems</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line772"><code><span class="pln">        menuItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--col1'</span><span class="pun">);</span></code></li><li class="L2" id="line773"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">subItems</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">9</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line774"><code><span class="pln">        menuItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--col2'</span><span class="pun">);</span></code></li><li class="L4" id="line775"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">subItems</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">13</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line776"><code><span class="pln">        menuItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--col3'</span><span class="pun">);</span></code></li><li class="L6" id="line777"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line778"><code><span class="pln">        menuItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--full'</span><span class="pun">);</span></code></li><li class="L8" id="line779"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line780"><code><span class="pln">          menuMega</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">right </span><span class="pun">=</span><span class="pln"> </span><span class="str">`${this.offsetLeft}px`</span><span class="pun">;</span></code></li><li class="L0" id="line781"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line782"><code><span class="pln">          menuMega</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="str">`${this.offsetLeft}px`</span><span class="pun">;</span></code></li><li class="L2" id="line783"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3" id="line784"><code><span class="pln">        </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L4" id="line785"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line786"><code></code></li><li class="L6" id="line787"><code><span class="pln">      </span><span class="com">// Check if there is enough space on the right to display the menu</span></code></li><li class="L7" id="line788"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> megaBounding </span><span class="pun">=</span><span class="pln"> menuMega</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">();</span></code></li><li class="L8" id="line789"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> containerBounding </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">();</span></code></li><li class="L9" id="line790"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> menuItemBounding </span><span class="pun">=</span><span class="pln"> menuItem</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">();</span></code></li><li class="L0" id="line791"><code></code></li><li class="L1" id="line792"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> megaWidth </span><span class="pun">=</span><span class="pln"> megaBounding</span><span class="pun">.</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L2" id="line793"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> containerWidth </span><span class="pun">=</span><span class="pln"> containerBounding</span><span class="pun">.</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L3" id="line794"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> menuItemPosition </span><span class="pun">=</span><span class="pln"> menuItemBounding</span><span class="pun">.</span><span class="pln">left </span><span class="pun">-</span><span class="pln"> containerBounding</span><span class="pun">.</span><span class="pln">left</span><span class="pun">;</span></code></li><li class="L4" id="line795"><code></code></li><li class="L5" id="line796"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuItemPosition </span><span class="pun">+</span><span class="pln"> megaWidth </span><span class="pun">></span><span class="pln"> containerWidth</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line797"><code><span class="pln">        menuMega</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__mega--rtl'</span><span class="pun">);</span></code></li><li class="L7" id="line798"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line799"><code><span class="pln">        menuMega</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__mega--rtl'</span><span class="pun">);</span></code></li><li class="L9" id="line800"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line801"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line802"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L2" id="line803"><code></code></li><li class="L3" id="line804"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L4" id="line805"><code><span class="com">   * Handles keyboard events specific to the menu.</span></code></li><li class="L5" id="line806"><code><span class="com">   *</span></code></li><li class="L6" id="line807"><code><span class="com">   * @param {Event} e</span></code></li><li class="L7" id="line808"><code><span class="com">   */</span></code></li><li class="L8" id="line809"><code><span class="pln">  handleKeyboard</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line810"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> element </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">;</span></code></li><li class="L0" id="line811"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> cList </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">;</span></code></li><li class="L1" id="line812"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuExpanded </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">);</span></code></li><li class="L2" id="line813"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">closest</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemSelector</span><span class="pun">);</span></code></li><li class="L3" id="line814"><code></code></li><li class="L4" id="line815"><code><span class="pln">    </span><span class="com">// Detect press on Escape</span></code></li><li class="L5" id="line816"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Escape'</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Esc'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line817"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">document</span><span class="pun">.</span><span class="pln">activeElement </span><span class="pun">===</span><span class="pln"> element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line818"><code><span class="pln">        element</span><span class="pun">.</span><span class="pln">blur</span><span class="pun">();</span></code></li><li class="L8" id="line819"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line820"><code></code></li><li class="L0" id="line821"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuExpanded </span><span class="pun">===</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line822"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> buttonCaret </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__button-caret'</span><span class="pun">,</span><span class="pln"> menuItem</span><span class="pun">);</span></code></li><li class="L2" id="line823"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">buttonCaret</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line824"><code><span class="pln">          buttonCaret</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L4" id="line825"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line826"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeOpenDropdown</span><span class="pun">();</span></code></li><li class="L6" id="line827"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L7" id="line828"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L8" id="line829"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line830"><code></code></li><li class="L0" id="line831"><code><span class="pln">    </span><span class="com">// Key actions to toggle the caret buttons</span></code></li><li class="L1" id="line832"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__button-caret'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&&</span><span class="pln"> menuExpanded </span><span class="pun">===</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line833"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">keyCode </span><span class="pun">===</span><span class="pln"> </span><span class="lit">32</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Enter'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line834"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">===</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line835"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOffItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L5" id="line836"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line837"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L7" id="line838"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8" id="line839"><code><span class="pln">        </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L9" id="line840"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line841"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowDown'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line842"><code><span class="pln">        e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L2" id="line843"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> firstItem </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L3" id="line844"><code><span class="pln">          </span><span class="str">'.ecl-menu__sublink:first-of-type'</span><span class="pun">,</span></code></li><li class="L4" id="line845"><code><span class="pln">          menuItem</span><span class="pun">,</span></code></li><li class="L5" id="line846"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L6" id="line847"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">firstItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line848"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleHoverOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L8" id="line849"><code><span class="pln">          firstItem</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L9" id="line850"><code><span class="pln">          </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L0" id="line851"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1" id="line852"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L2" id="line853"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line854"><code></code></li><li class="L4" id="line855"><code><span class="pln">    </span><span class="com">// Key actions to navigate between first level menu items</span></code></li><li class="L5" id="line856"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L6" id="line857"><code><span class="pln">      cList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__link'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span></code></li><li class="L7" id="line858"><code><span class="pln">      cList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__button-caret'</span><span class="pun">)</span></code></li><li class="L8" id="line859"><code><span class="pln">    </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line860"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowLeft'</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowUp'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line861"><code><span class="pln">        e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L1" id="line862"><code><span class="pln">        let prevItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">previousSibling</span><span class="pun">;</span></code></li><li class="L2" id="line863"><code></code></li><li class="L3" id="line864"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prevItem </span><span class="pun">&&</span><span class="pln"> prevItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__link'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line865"><code><span class="pln">          prevItem</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L5" id="line866"><code><span class="pln">          </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L6" id="line867"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7" id="line868"><code></code></li><li class="L8" id="line869"><code><span class="pln">        prevItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">parentElement</span><span class="pun">.</span><span class="pln">previousSibling</span><span class="pun">;</span></code></li><li class="L9" id="line870"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prevItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line871"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> prevClass </span><span class="pun">=</span><span class="pln"> prevItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span></code></li><li class="L1" id="line872"><code><span class="pln">            </span><span class="str">'ecl-menu__item--has-children'</span><span class="pun">,</span></code></li><li class="L2" id="line873"><code><span class="pln">          </span><span class="pun">)</span></code></li><li class="L3" id="line874"><code><span class="pln">            </span><span class="pun">?</span><span class="pln"> </span><span class="str">'.ecl-menu__button-caret'</span></code></li><li class="L4" id="line875"><code><span class="pln">            </span><span class="pun">:</span><span class="pln"> </span><span class="str">'.ecl-menu__link'</span><span class="pun">;</span></code></li><li class="L5" id="line876"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> prevLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="pln">prevClass</span><span class="pun">,</span><span class="pln"> prevItem</span><span class="pun">);</span></code></li><li class="L6" id="line877"><code></code></li><li class="L7" id="line878"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prevLink</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line879"><code><span class="pln">            prevLink</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L9" id="line880"><code><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L0" id="line881"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L1" id="line882"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2" id="line883"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line884"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowRight'</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowDown'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line885"><code><span class="pln">        e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L5" id="line886"><code><span class="pln">        let nextItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">nextSibling</span><span class="pun">;</span></code></li><li class="L6" id="line887"><code></code></li><li class="L7" id="line888"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nextItem </span><span class="pun">&&</span><span class="pln"> nextItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__button-caret'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line889"><code><span class="pln">          nextItem</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L9" id="line890"><code><span class="pln">          </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L0" id="line891"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1" id="line892"><code><span class="pln">        nextItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">parentElement</span><span class="pun">.</span><span class="pln">nextSibling</span><span class="pun">;</span></code></li><li class="L2" id="line893"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nextItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line894"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> nextLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__link'</span><span class="pun">,</span><span class="pln"> nextItem</span><span class="pun">);</span></code></li><li class="L4" id="line895"><code></code></li><li class="L5" id="line896"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nextLink</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line897"><code><span class="pln">            nextLink</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L7" id="line898"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L8" id="line899"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9" id="line900"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line901"><code></code></li><li class="L1" id="line902"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeOpenDropdown</span><span class="pun">();</span></code></li><li class="L2" id="line903"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line904"><code></code></li><li class="L4" id="line905"><code><span class="pln">    </span><span class="com">// Key actions to navigate between the sub-links</span></code></li><li class="L5" id="line906"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-menu__sublink'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line907"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowDown'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line908"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> nextItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">parentElement</span><span class="pun">.</span><span class="pln">nextSibling</span><span class="pun">;</span></code></li><li class="L8" id="line909"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nextItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line910"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> nextLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__sublink'</span><span class="pun">,</span><span class="pln"> nextItem</span><span class="pun">);</span></code></li><li class="L0" id="line911"><code></code></li><li class="L1" id="line912"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nextLink</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line913"><code><span class="pln">            nextLink</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L3" id="line914"><code><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L4" id="line915"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L5" id="line916"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L6" id="line917"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L7" id="line918"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ArrowUp'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line919"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> prevItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">parentElement</span><span class="pun">.</span><span class="pln">previousSibling</span><span class="pun">;</span></code></li><li class="L9" id="line920"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prevItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line921"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> prevLink </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'.ecl-menu__sublink'</span><span class="pun">,</span><span class="pln"> prevItem</span><span class="pun">);</span></code></li><li class="L1" id="line922"><code></code></li><li class="L2" id="line923"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prevLink</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line924"><code><span class="pln">            prevLink</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L4" id="line925"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L5" id="line926"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line927"><code><span class="pln">          </span><span class="kwd">const</span><span class="pln"> caretButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L7" id="line928"><code><span class="pln">            </span><span class="str">`${this.itemSelector}[aria-expanded="true"] ${this.caretSelector}`</span><span class="pun">,</span></code></li><li class="L8" id="line929"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span></code></li><li class="L9" id="line930"><code><span class="pln">          </span><span class="pun">);</span></code></li><li class="L0" id="line931"><code></code></li><li class="L1" id="line932"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">caretButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line933"><code><span class="pln">            caretButton</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L3" id="line934"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L4" id="line935"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line936"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L6" id="line937"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line938"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8" id="line939"><code></code></li><li class="L9" id="line940"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line941"><code><span class="com">   * Handles global keyboard events, triggered outside of the menu.</span></code></li><li class="L1" id="line942"><code><span class="com">   *</span></code></li><li class="L2" id="line943"><code><span class="com">   * @param {Event} e</span></code></li><li class="L3" id="line944"><code><span class="com">   */</span></code></li><li class="L4" id="line945"><code><span class="pln">  handleKeyboardGlobal</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line946"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuExpanded </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">);</span></code></li><li class="L6" id="line947"><code></code></li><li class="L7" id="line948"><code><span class="pln">    </span><span class="com">// Detect press on Escape</span></code></li><li class="L8" id="line949"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Escape'</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Esc'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line950"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuExpanded </span><span class="pun">===</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line951"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose</span><span class="pun">();</span></code></li><li class="L1" id="line952"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L2" id="line953"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line954"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L4" id="line955"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L5" id="line956"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">carets</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">caret</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line957"><code><span class="pln">        caret</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L7" id="line958"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L8" id="line959"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line960"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line961"><code></code></li><li class="L1" id="line962"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line963"><code><span class="com">   * Open menu list.</span></code></li><li class="L3" id="line964"><code><span class="com">   * @param {Event} e</span></code></li><li class="L4" id="line965"><code><span class="com">   *</span></code></li><li class="L5" id="line966"><code><span class="com">   * @fires Menu#onOpen</span></code></li><li class="L6" id="line967"><code><span class="com">   */</span></code></li><li class="L7" id="line968"><code><span class="pln">  handleClickOnOpen</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line969"><code><span class="pln">    e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L9" id="line970"><code></code></li><li class="L0" id="line971"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L1" id="line972"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L2" id="line973"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">disableScroll</span><span class="pun">();</span></code></li><li class="L3" id="line974"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isOpen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4" id="line975"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap</span><span class="pun">.</span><span class="pln">activate</span><span class="pun">();</span></code></li><li class="L5" id="line976"><code></code></li><li class="L6" id="line977"><code><span class="pln">    </span><span class="com">// Update label</span></code></li><li class="L7" id="line978"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> closeLabel </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">labelCloseAttribute</span><span class="pun">);</span></code></li><li class="L8" id="line979"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toggleLabel </span><span class="pun">&&</span><span class="pln"> closeLabel</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line980"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toggleLabel</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> closeLabel</span><span class="pun">;</span></code></li><li class="L0" id="line981"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line982"><code></code></li><li class="L2" id="line983"><code><span class="pln">    </span><span class="com">// Focus first element</span></code></li><li class="L3" id="line984"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links</span><span class="pun">.</span><span class="pln">length </span><span class="pun">></span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line985"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">links</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L5" id="line986"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line987"><code></code></li><li class="L7" id="line988"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">trigger</span><span class="pun">(</span><span class="str">'onOpen'</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">);</span></code></li><li class="L8" id="line989"><code></code></li><li class="L9" id="line990"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L0" id="line991"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L1" id="line992"><code></code></li><li class="L2" id="line993"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L3" id="line994"><code><span class="com">   * Close menu list.</span></code></li><li class="L4" id="line995"><code><span class="com">   * @param {Event} e</span></code></li><li class="L5" id="line996"><code><span class="com">   *</span></code></li><li class="L6" id="line997"><code><span class="com">   * @fires Menu#onClose</span></code></li><li class="L7" id="line998"><code><span class="com">   */</span></code></li><li class="L8" id="line999"><code><span class="pln">  handleClickOnClose</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line1000"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L0" id="line1001"><code></code></li><li class="L1" id="line1002"><code><span class="pln">    </span><span class="com">// Remove css class and attribute from inner menu</span></code></li><li class="L2" id="line1003"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__inner--expanded'</span><span class="pun">);</span></code></li><li class="L3" id="line1004"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L4" id="line1005"><code></code></li><li class="L5" id="line1006"><code><span class="pln">    </span><span class="com">// Remove css class and attribute from menu items</span></code></li><li class="L6" id="line1007"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1008"><code><span class="pln">      item</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__item--expanded'</span><span class="pun">);</span></code></li><li class="L8" id="line1009"><code><span class="pln">      item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L9" id="line1010"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L0" id="line1011"><code></code></li><li class="L1" id="line1012"><code><span class="pln">    </span><span class="com">// Update label</span></code></li><li class="L2" id="line1013"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> openLabel </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">labelOpenAttribute</span><span class="pun">);</span></code></li><li class="L3" id="line1014"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toggleLabel </span><span class="pun">&&</span><span class="pln"> openLabel</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line1015"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toggleLabel</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> openLabel</span><span class="pun">;</span></code></li><li class="L5" id="line1016"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line1017"><code></code></li><li class="L7" id="line1018"><code><span class="pln">    </span><span class="com">// Set focus to hamburger button</span></code></li><li class="L8" id="line1019"><code></code></li><li class="L9" id="line1020"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">enableScroll</span><span class="pun">();</span></code></li><li class="L0" id="line1021"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap</span><span class="pun">.</span><span class="pln">deactivate</span><span class="pun">();</span></code></li><li class="L1" id="line1022"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isOpen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L2" id="line1023"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">trigger</span><span class="pun">(</span><span class="str">'onClose'</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">);</span></code></li><li class="L3" id="line1024"><code></code></li><li class="L4" id="line1025"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L5" id="line1026"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line1027"><code></code></li><li class="L7" id="line1028"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line1029"><code><span class="com">   * Toggle menu list.</span></code></li><li class="L9" id="line1030"><code><span class="com">   * @param {Event} e</span></code></li><li class="L0" id="line1031"><code><span class="com">   */</span></code></li><li class="L1" id="line1032"><code><span class="pln">  handleClickOnToggle</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line1033"><code><span class="pln">    e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L3" id="line1034"><code></code></li><li class="L4" id="line1035"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isOpen</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line1036"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L6" id="line1037"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1038"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnOpen</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L8" id="line1039"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line1040"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line1041"><code></code></li><li class="L1" id="line1042"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line1043"><code><span class="com">   * Get back to previous list (on mobile)</span></code></li><li class="L3" id="line1044"><code><span class="com">   */</span></code></li><li class="L4" id="line1045"><code><span class="pln">  handleClickOnBack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line1046"><code><span class="pln">    </span><span class="com">// Remove css class from inner menu</span></code></li><li class="L6" id="line1047"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__inner--expanded'</span><span class="pun">);</span></code></li><li class="L7" id="line1048"><code></code></li><li class="L8" id="line1049"><code><span class="pln">    </span><span class="com">// Remove css class and attribute from menu items</span></code></li><li class="L9" id="line1050"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line1051"><code><span class="pln">      item</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__item--expanded'</span><span class="pun">);</span></code></li><li class="L1" id="line1052"><code><span class="pln">      item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L2" id="line1053"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L3" id="line1054"><code></code></li><li class="L4" id="line1055"><code><span class="pln">    </span><span class="com">// Focus previously selected item</span></code></li><li class="L5" id="line1056"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">backItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line1057"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> backItemButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caretSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">backItem</span><span class="pun">);</span></code></li><li class="L7" id="line1058"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">backItemButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line1059"><code><span class="pln">        backItemButton</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L9" id="line1060"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line1061"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line1062"><code></code></li><li class="L2" id="line1063"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L3" id="line1064"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L4" id="line1065"><code></code></li><li class="L5" id="line1066"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line1067"><code><span class="com">   * Click on the previous items button</span></code></li><li class="L7" id="line1068"><code><span class="com">   */</span></code></li><li class="L8" id="line1069"><code><span class="pln">  handleClickOnPreviousItems</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line1070"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L0" id="line1071"><code></code></li><li class="L1" id="line1072"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2" id="line1073"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line1074"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">right </span><span class="pun">=</span><span class="pln"> </span><span class="str">'0'</span><span class="pun">;</span></code></li><li class="L4" id="line1075"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="str">'auto'</span><span class="pun">;</span></code></li><li class="L5" id="line1076"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line1077"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="str">'0'</span><span class="pun">;</span></code></li><li class="L7" id="line1078"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">right </span><span class="pun">=</span><span class="pln"> </span><span class="str">'auto'</span><span class="pun">;</span></code></li><li class="L8" id="line1079"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line1080"><code></code></li><li class="L0" id="line1081"><code><span class="pln">    </span><span class="com">// Update button display</span></code></li><li class="L1" id="line1082"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'none'</span><span class="pun">;</span></code></li><li class="L2" id="line1083"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'block'</span><span class="pun">;</span></code></li><li class="L3" id="line1084"><code></code></li><li class="L4" id="line1085"><code><span class="pln">    </span><span class="com">// Refresh display</span></code></li><li class="L5" id="line1086"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line1087"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1088"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuItem</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L8" id="line1089"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">toggleAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">);</span></code></li><li class="L9" id="line1090"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L0" id="line1091"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line1092"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L2" id="line1093"><code></code></li><li class="L3" id="line1094"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L4" id="line1095"><code><span class="com">   * Click on the next items button</span></code></li><li class="L5" id="line1096"><code><span class="com">   */</span></code></li><li class="L6" id="line1097"><code><span class="pln">  handleClickOnNextItems</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1098"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L8" id="line1099"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList </span><span class="pun">||</span></code></li><li class="L9" id="line1100"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items </span><span class="pun">||</span></code></li><li class="L0" id="line1101"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious </span><span class="pun">||</span></code></li><li class="L1" id="line1102"><code><span class="pln">      </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem</span></code></li><li class="L2" id="line1103"><code><span class="pln">    </span><span class="pun">)</span></code></li><li class="L3" id="line1104"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L4" id="line1105"><code></code></li><li class="L5" id="line1106"><code><span class="pln">    </span><span class="com">// Update button display</span></code></li><li class="L6" id="line1107"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'block'</span><span class="pun">;</span></code></li><li class="L7" id="line1108"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnNext</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span><span class="pln"> </span><span class="str">'none'</span><span class="pun">;</span></code></li><li class="L8" id="line1109"><code></code></li><li class="L9" id="line1110"><code><span class="pln">    </span><span class="com">// Calculate left offset</span></code></li><li class="L0" id="line1111"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">direction </span><span class="pun">===</span><span class="pln"> </span><span class="str">'rtl'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line1112"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">=</span></code></li><li class="L2" id="line1113"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">right </span><span class="pun">-</span></code></li><li class="L3" id="line1114"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">right </span><span class="pun">-</span></code></li><li class="L4" id="line1115"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">offsetWidth</span><span class="pun">;</span></code></li><li class="L5" id="line1116"><code></code></li><li class="L6" id="line1117"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">right </span><span class="pun">=</span><span class="pln"> </span><span class="str">`-${this.offsetLeft}px`</span><span class="pun">;</span></code></li><li class="L7" id="line1118"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="str">'auto'</span><span class="pun">;</span></code></li><li class="L8" id="line1119"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line1120"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">=</span></code></li><li class="L0" id="line1121"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastVisibleItem</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">left </span><span class="pun">-</span></code></li><li class="L1" id="line1122"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">getBoundingClientRect</span><span class="pun">().</span><span class="pln">left </span><span class="pun">-</span></code></li><li class="L2" id="line1123"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">btnPrevious</span><span class="pun">.</span><span class="pln">offsetWidth</span><span class="pun">;</span></code></li><li class="L3" id="line1124"><code></code></li><li class="L4" id="line1125"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="str">`-${this.offsetLeft}px`</span><span class="pun">;</span></code></li><li class="L5" id="line1126"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsList</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">right </span><span class="pun">=</span><span class="pln"> </span><span class="str">'auto'</span><span class="pun">;</span></code></li><li class="L6" id="line1127"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line1128"><code></code></li><li class="L8" id="line1129"><code><span class="pln">    </span><span class="com">// Refresh display</span></code></li><li class="L9" id="line1130"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line1131"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line1132"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMenuItem</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li class="L2" id="line1133"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">toggleAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">);</span></code></li><li class="L3" id="line1134"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L4" id="line1135"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line1136"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line1137"><code></code></li><li class="L7" id="line1138"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line1139"><code><span class="com">   * Click on a menu item caret</span></code></li><li class="L9" id="line1140"><code><span class="com">   * @param {Event} e</span></code></li><li class="L0" id="line1141"><code><span class="com">   */</span></code></li><li class="L1" id="line1142"><code><span class="pln">  handleClickOnCaret</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line1143"><code><span class="pln">    </span><span class="com">// Don't execute for desktop display</span></code></li><li class="L3" id="line1144"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuExpanded </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">);</span></code></li><li class="L4" id="line1145"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">menuExpanded </span><span class="pun">===</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line1146"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L6" id="line1147"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line1148"><code></code></li><li class="L8" id="line1149"><code><span class="pln">    </span><span class="com">// Add css class to inner menu</span></code></li><li class="L9" id="line1150"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__inner--expanded'</span><span class="pun">);</span></code></li><li class="L0" id="line1151"><code></code></li><li class="L1" id="line1152"><code><span class="pln">    </span><span class="com">// Add css class and attribute to current item, and remove it from others</span></code></li><li class="L2" id="line1153"><code><span class="pln">    </span><span class="com">// Also save the current item</span></code></li><li class="L3" id="line1154"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuItem </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">closest</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemSelector</span><span class="pun">);</span></code></li><li class="L4" id="line1155"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line1156"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">item </span><span class="pun">===</span><span class="pln"> menuItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line1157"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-menu__item--expanded'</span><span class="pun">);</span></code></li><li class="L7" id="line1158"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L8" id="line1159"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">backItem </span><span class="pun">=</span><span class="pln"> item</span><span class="pun">;</span></code></li><li class="L9" id="line1160"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line1161"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-menu__item--expanded'</span><span class="pun">);</span></code></li><li class="L1" id="line1162"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L2" id="line1163"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L3" id="line1164"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L4" id="line1165"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMegaMenu</span><span class="pun">(</span><span class="pln">menuItem</span><span class="pun">);</span></code></li><li class="L5" id="line1166"><code></code></li><li class="L6" id="line1167"><code><span class="pln">    </span><span class="com">// Focus first item</span></code></li><li class="L7" id="line1168"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> firstItem </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L8" id="line1169"><code><span class="pln">      </span><span class="str">'.ecl-menu__subitem:first-of-type .ecl-menu__sublink'</span><span class="pun">,</span></code></li><li class="L9" id="line1170"><code><span class="pln">      menuItem</span><span class="pun">,</span></code></li><li class="L0" id="line1171"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L1" id="line1172"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">firstItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line1173"><code><span class="pln">      firstItem</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L3" id="line1174"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line1175"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line1176"><code></code></li><li class="L6" id="line1177"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line1178"><code><span class="com">   * Hover on a menu item</span></code></li><li class="L8" id="line1179"><code><span class="com">   * @param {Event} e</span></code></li><li class="L9" id="line1180"><code><span class="com">   */</span></code></li><li class="L0" id="line1181"><code><span class="pln">  handleHoverOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line1182"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuItem </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">closest</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemSelector</span><span class="pun">);</span></code></li><li class="L2" id="line1183"><code></code></li><li class="L3" id="line1184"><code><span class="pln">    </span><span class="com">// Ignore hidden or partially hidden items</span></code></li><li class="L4" id="line1185"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L5" id="line1186"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hasOverflow </span><span class="pun">&&</span></code></li><li class="L6" id="line1187"><code><span class="pln">      </span><span class="pun">!</span><span class="pln">menuItem</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">)</span></code></li><li class="L7" id="line1188"><code><span class="pln">    </span><span class="pun">)</span></code></li><li class="L8" id="line1189"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L9" id="line1190"><code></code></li><li class="L0" id="line1191"><code><span class="pln">    </span><span class="com">// Add attribute to current item, and remove it from others</span></code></li><li class="L1" id="line1192"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line1193"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> caretButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caretSelector</span><span class="pun">,</span><span class="pln"> item</span><span class="pun">);</span></code></li><li class="L3" id="line1194"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">item </span><span class="pun">===</span><span class="pln"> menuItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line1195"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L5" id="line1196"><code></code></li><li class="L6" id="line1197"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">caretButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1198"><code><span class="pln">          caretButton</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L8" id="line1199"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9" id="line1200"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line1201"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L1" id="line1202"><code></code></li><li class="L2" id="line1203"><code><span class="pln">        </span><span class="com">// Force remove focus on caret buttons</span></code></li><li class="L3" id="line1204"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">caretButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line1205"><code><span class="pln">          caretButton</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L5" id="line1206"><code><span class="pln">          caretButton</span><span class="pun">.</span><span class="pln">blur</span><span class="pun">();</span></code></li><li class="L6" id="line1207"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7" id="line1208"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L8" id="line1209"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L9" id="line1210"><code></code></li><li class="L0" id="line1211"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkMegaMenu</span><span class="pun">(</span><span class="pln">menuItem</span><span class="pun">);</span></code></li><li class="L1" id="line1212"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L2" id="line1213"><code></code></li><li class="L3" id="line1214"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L4" id="line1215"><code><span class="com">   * Deselect a menu item</span></code></li><li class="L5" id="line1216"><code><span class="com">   * @param {Event} e</span></code></li><li class="L6" id="line1217"><code><span class="com">   */</span></code></li><li class="L7" id="line1218"><code><span class="pln">  handleHoverOffItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line1219"><code><span class="pln">    </span><span class="com">// Remove attribute to current item</span></code></li><li class="L9" id="line1220"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> menuItem </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">closest</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemSelector</span><span class="pun">);</span></code></li><li class="L0" id="line1221"><code><span class="pln">    menuItem</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L1" id="line1222"><code></code></li><li class="L2" id="line1223"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> caretButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caretSelector</span><span class="pun">,</span><span class="pln"> menuItem</span><span class="pun">);</span></code></li><li class="L3" id="line1224"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">caretButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line1225"><code><span class="pln">      caretButton</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L5" id="line1226"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line1227"><code></code></li><li class="L7" id="line1228"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L8" id="line1229"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L9" id="line1230"><code></code></li><li class="L0" id="line1231"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L1" id="line1232"><code><span class="com">   * Deselect any opened menu item</span></code></li><li class="L2" id="line1233"><code><span class="com">   */</span></code></li><li class="L3" id="line1234"><code><span class="pln">  closeOpenDropdown</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line1235"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> currentItem </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L5" id="line1236"><code><span class="pln">      </span><span class="str">`${this.itemSelector}[aria-expanded='true']`</span><span class="pun">,</span></code></li><li class="L6" id="line1237"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span></code></li><li class="L7" id="line1238"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L8" id="line1239"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">currentItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line1240"><code><span class="pln">      currentItem</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L0" id="line1241"><code></code></li><li class="L1" id="line1242"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> caretButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caretSelector</span><span class="pun">,</span><span class="pln"> currentItem</span><span class="pun">);</span></code></li><li class="L2" id="line1243"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">caretButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line1244"><code><span class="pln">        caretButton</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-expanded'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'false'</span><span class="pun">);</span></code></li><li class="L4" id="line1245"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line1246"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line1247"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L7" id="line1248"><code></code></li><li class="L8" id="line1249"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L9" id="line1250"><code><span class="com">   * Focus in a menu link</span></code></li><li class="L0" id="line1251"><code><span class="com">   * @param {Event} e</span></code></li><li class="L1" id="line1252"><code><span class="com">   */</span></code></li><li class="L2" id="line1253"><code><span class="pln">  handleFocusIn</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line1254"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> element </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">;</span></code></li><li class="L4" id="line1255"><code></code></li><li class="L5" id="line1256"><code><span class="pln">    </span><span class="com">// Specific focus action for desktop menu</span></code></li><li class="L6" id="line1257"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hasOverflow</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1258"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> parentItem </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">closest</span><span class="pun">(</span><span class="str">'[data-ecl-menu-item]'</span><span class="pun">);</span></code></li><li class="L8" id="line1259"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">parentItem</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="str">'data-ecl-menu-item-visible'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line1260"><code><span class="pln">        </span><span class="com">// Trigger scroll button depending on the context</span></code></li><li class="L0" id="line1261"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">offsetLeft </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line1262"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextItems</span><span class="pun">();</span></code></li><li class="L2" id="line1263"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line1264"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousItems</span><span class="pun">();</span></code></li><li class="L4" id="line1265"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line1266"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L6" id="line1267"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line1268"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8" id="line1269"><code></code></li><li class="L9" id="line1270"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line1271"><code><span class="com">   * Handles global click events, triggered outside of the menu.</span></code></li><li class="L1" id="line1272"><code><span class="com">   *</span></code></li><li class="L2" id="line1273"><code><span class="com">   * @param {Event} e</span></code></li><li class="L3" id="line1274"><code><span class="com">   */</span></code></li><li class="L4" id="line1275"><code><span class="pln">  handleClickGlobal</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line1276"><code><span class="pln">    </span><span class="com">// Check if the menu is open</span></code></li><li class="L6" id="line1277"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isOpen</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line1278"><code><span class="pln">      </span><span class="com">// Check if the click occured in the menu</span></code></li><li class="L8" id="line1279"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">inner</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&&</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">open</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line1280"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnClose</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L0" id="line1281"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L1" id="line1282"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line1283"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L3" id="line1284"><code><span class="pun">}</span></code></li><li class="L4" id="line1285"><code></code></li><li class="L5" id="line1286"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">Menu</span><span class="pun">;</span></code></li></ol></pre></article></section></div><br class="clear"><footer>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Thu Jul 04 2024 08:17:35 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.</footer><script>prettyPrint();</script><script src="scripts/polyfill.js"></script><script src="scripts/linenumber.js"></script></body></html>