<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>table.js - Documentation</title><script src="scripts/prettify/prettify.js"></script><script src="scripts/prettify/lang-css.js"></script><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link href="styles/prettify.css" rel="stylesheet" type="text/css"><link href="styles/jsdoc.css" rel="stylesheet" type="text/css"><script src="scripts/nav.js" defer></script><meta content="width=device-width,initial-scale=1" name="viewport"></head><body><input class="nav-trigger" id="nav-trigger" type="checkbox"> <label class="navicon-button x" for="nav-trigger"><div class="navicon"></div></label> <label class="overlay" for="nav-trigger"></label><nav><h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Table.html">Table</a><ul class="methods"><li data-type="method"><a href="Table.html#destroy">destroy</a></li><li data-type="method"><a href="Table.html#init">init</a></li><li data-type="method"><a href="Table.html#.autoInit">autoInit</a></li><li data-type="method"><a href="Table.html#.createSortIcon">createSortIcon</a></li></ul></li></ul></nav><div id="main"><h1 class="page-title">table.js</h1><section><article><pre class="prettyprint source linenums"><ol class="linenums"><li class="L0" id="line1"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> queryAll</span><span class="pun">,</span><span class="pln"> queryOne </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/dom-utils'</span><span class="pun">;</span></code></li><li class="L1" id="line2"><code><span class="kwd">import</span><span class="pln"> getSystem </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/builder/utils/getSystem'</span><span class="pun">;</span></code></li><li class="L2" id="line3"><code><span class="kwd">import</span><span class="pln"> iconSvgAllArrow </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/resources-icons/dist/svg/all/solid-arrow.svg'</span><span class="pun">;</span></code></li><li class="L3" id="line4"><code></code></li><li class="L4" id="line5"><code><span class="kwd">const</span><span class="pln"> system </span><span class="pun">=</span><span class="pln"> getSystem</span><span class="pun">();</span></code></li><li class="L5" id="line6"><code><span class="kwd">const</span><span class="pln"> iconSvgAllArrowSize </span><span class="pun">=</span><span class="pln"> system </span><span class="pun">===</span><span class="pln"> </span><span class="str">'eu'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="str">'m'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'xs'</span><span class="pun">;</span></code></li><li class="L6" id="line7"><code></code></li><li class="L7" id="line8"><code><span class="com">/**</span></code></li><li class="L8" id="line9"><code><span class="com"> * @param {HTMLElement} element DOM element for component instantiation and scope</span></code></li><li class="L9" id="line10"><code><span class="com"> * @param {Object} options</span></code></li><li class="L0" id="line11"><code><span class="com"> * @param {String} options.sortSelector Selector for toggling element</span></code></li><li class="L1" id="line12"><code><span class="com"> * @param {String} options.sortLabelSelector Selector for sorting button label</span></code></li><li class="L2" id="line13"><code><span class="com"> * @param {Boolean} options.attachClickListener</span></code></li><li class="L3" id="line14"><code><span class="com"> */</span></code></li><li class="L4" id="line15"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Table</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line16"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line17"><code><span class="com">   * @static</span></code></li><li class="L7" id="line18"><code><span class="com">   * Shorthand for instance creation and initialisation.</span></code></li><li class="L8" id="line19"><code><span class="com">   *</span></code></li><li class="L9" id="line20"><code><span class="com">   * @param {HTMLElement} root DOM element for component instantiation and scope</span></code></li><li class="L0" id="line21"><code><span class="com">   *</span></code></li><li class="L1" id="line22"><code><span class="com">   * @return {Table} An instance of table.</span></code></li><li class="L2" id="line23"><code><span class="com">   */</span></code></li><li class="L3" id="line24"><code><span class="pln">  </span><span class="kwd">static</span><span class="pln"> autoInit</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> TABLE</span><span class="pun">:</span><span class="pln"> defaultOptions </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{})</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line25"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> table </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Table</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> defaultOptions</span><span class="pun">);</span></code></li><li class="L5" id="line26"><code><span class="pln">    table</span><span class="pun">.</span><span class="pln">init</span><span class="pun">();</span></code></li><li class="L6" id="line27"><code><span class="pln">    root</span><span class="pun">.</span><span class="typ">ECLTable</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">;</span></code></li><li class="L7" id="line28"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> table</span><span class="pun">;</span></code></li><li class="L8" id="line29"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L9" id="line30"><code></code></li><li class="L0" id="line31"><code><span class="pln">  constructor</span><span class="pun">(</span></code></li><li class="L1" id="line32"><code><span class="pln">    element</span><span class="pun">,</span></code></li><li class="L2" id="line33"><code><span class="pln">    </span><span class="pun">{</span></code></li><li class="L3" id="line34"><code><span class="pln">      sortSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-table-sort-toggle]'</span><span class="pun">,</span></code></li><li class="L4" id="line35"><code><span class="pln">      sortLabelSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-table-sort-label'</span><span class="pun">,</span></code></li><li class="L5" id="line36"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{},</span></code></li><li class="L6" id="line37"><code><span class="pln">  </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line38"><code><span class="pln">    </span><span class="com">// Check element</span></code></li><li class="L8" id="line39"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">element </span><span class="pun">||</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">nodeType </span><span class="pun">!==</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">.</span><span class="pln">ELEMENT_NODE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line40"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span></code></li><li class="L0" id="line41"><code><span class="pln">        </span><span class="str">'DOM element should be given to initialize this widget.'</span><span class="pun">,</span></code></li><li class="L1" id="line42"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L2" id="line43"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line44"><code></code></li><li class="L4" id="line45"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L5" id="line46"><code></code></li><li class="L6" id="line47"><code><span class="pln">    </span><span class="com">// Options</span></code></li><li class="L7" id="line48"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortSelector </span><span class="pun">=</span><span class="pln"> sortSelector</span><span class="pun">;</span></code></li><li class="L8" id="line49"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortLabelSelector </span><span class="pun">=</span><span class="pln"> sortLabelSelector</span><span class="pun">;</span></code></li><li class="L9" id="line50"><code></code></li><li class="L0" id="line51"><code><span class="pln">    </span><span class="com">// Private variables</span></code></li><li class="L1" id="line52"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L2" id="line53"><code></code></li><li class="L3" id="line54"><code><span class="pln">    </span><span class="com">// Bind `this` for use in callbacks</span></code></li><li class="L4" id="line55"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnSort </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnSort</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L5" id="line56"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line57"><code></code></li><li class="L7" id="line58"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line59"><code><span class="com">   * @returns {HTMLElement}</span></code></li><li class="L9" id="line60"><code><span class="com">   */</span></code></li><li class="L0" id="line61"><code><span class="pln">  </span><span class="kwd">static</span><span class="pln"> createSortIcon</span><span class="pun">(</span><span class="pln">customClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line62"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> tempElement </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'span'</span><span class="pun">);</span></code></li><li class="L2" id="line63"><code><span class="pln">    tempElement</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> iconSvgAllArrow</span><span class="pun">;</span><span class="pln"> </span><span class="com">// avoiding the use of not-so-stable createElementNs</span></code></li><li class="L3" id="line64"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> svg </span><span class="pun">=</span><span class="pln"> tempElement</span><span class="pun">.</span><span class="pln">children</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></code></li><li class="L4" id="line65"><code><span class="pln">    svg</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'height'</span><span class="pun">);</span></code></li><li class="L5" id="line66"><code><span class="pln">    svg</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'width'</span><span class="pun">);</span></code></li><li class="L6" id="line67"><code><span class="pln">    svg</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'focusable'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></code></li><li class="L7" id="line68"><code><span class="pln">    svg</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-hidden'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L8" id="line69"><code><span class="pln">    </span><span class="com">// The following element is &lt;path> which does not support classList API as others.</span></code></li><li class="L9" id="line70"><code><span class="pln">    svg</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span></code></li><li class="L0" id="line71"><code><span class="pln">      </span><span class="str">'class'</span><span class="pun">,</span></code></li><li class="L1" id="line72"><code><span class="pln">      </span><span class="str">`ecl-table__icon ecl-icon ecl-icon--${iconSvgAllArrowSize} ${customClass}`</span><span class="pun">,</span></code></li><li class="L2" id="line73"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L3" id="line74"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> svg</span><span class="pun">;</span></code></li><li class="L4" id="line75"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line76"><code></code></li><li class="L6" id="line77"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line78"><code><span class="com">   * Initialise component.</span></code></li><li class="L8" id="line79"><code><span class="com">   */</span></code></li><li class="L9" id="line80"><code><span class="pln">  init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line81"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">ECL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line82"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span><span class="str">'Called init but ECL is not present'</span><span class="pun">);</span></code></li><li class="L2" id="line83"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line84"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">=</span><span class="pln"> ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L4" id="line85"><code></code></li><li class="L5" id="line86"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L6" id="line87"><code></code></li><li class="L7" id="line88"><code><span class="pln">    </span><span class="com">// Add sort arrows and bind click event on toggles.</span></code></li><li class="L8" id="line89"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line90"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">tr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line91"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> sort </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'button'</span><span class="pun">);</span></code></li><li class="L1" id="line92"><code><span class="pln">        sort</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-table__arrow'</span><span class="pun">);</span></code></li><li class="L2" id="line93"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortLabelSelector</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line94"><code><span class="pln">          sort</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span></code></li><li class="L4" id="line95"><code><span class="pln">            </span><span class="str">'aria-label'</span><span class="pun">,</span></code></li><li class="L5" id="line96"><code><span class="pln">            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortLabelSelector</span><span class="pun">),</span></code></li><li class="L6" id="line97"><code><span class="pln">          </span><span class="pun">);</span></code></li><li class="L7" id="line98"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8" id="line99"><code><span class="pln">        sort</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="typ">Table</span><span class="pun">.</span><span class="pln">createSortIcon</span><span class="pun">(</span><span class="str">'ecl-table__icon-up'</span><span class="pun">));</span></code></li><li class="L9" id="line100"><code><span class="pln">        sort</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="typ">Table</span><span class="pun">.</span><span class="pln">createSortIcon</span><span class="pun">(</span><span class="str">'ecl-table__icon-down'</span><span class="pun">));</span></code></li><li class="L0" id="line101"><code><span class="pln">        tr</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">sort</span><span class="pun">);</span></code></li><li class="L1" id="line102"><code><span class="pln">        tr</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnSort</span><span class="pun">(</span><span class="pln">tr</span><span class="pun">)(</span><span class="pln">e</span><span class="pun">));</span></code></li><li class="L2" id="line103"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L3" id="line104"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line105"><code></code></li><li class="L5" id="line106"><code><span class="pln">    </span><span class="com">// Set default row order via dataset.</span></code></li><li class="L6" id="line107"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> tbody </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'tbody'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L7" id="line108"><code><span class="pln">    </span><span class="pun">[...</span><span class="pln">queryAll</span><span class="pun">(</span><span class="str">'tr'</span><span class="pun">,</span><span class="pln"> tbody</span><span class="pun">)].</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">tr</span><span class="pun">,</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line109"><code><span class="pln">      tr</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-table-order'</span><span class="pun">,</span><span class="pln"> index</span><span class="pun">);</span></code></li><li class="L9" id="line110"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L0" id="line111"><code></code></li><li class="L1" id="line112"><code><span class="pln">    </span><span class="com">// Set ecl initialized attribute</span></code></li><li class="L2" id="line113"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L3" id="line114"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L4" id="line115"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line116"><code></code></li><li class="L6" id="line117"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line118"><code><span class="com">   * Destroy component.</span></code></li><li class="L8" id="line119"><code><span class="com">   */</span></code></li><li class="L9" id="line120"><code><span class="pln">  destroy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line121"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line122"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">tr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line123"><code><span class="pln">        tr</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnSort</span><span class="pun">(</span><span class="pln">tr</span><span class="pun">)(</span><span class="pln">e</span><span class="pun">));</span></code></li><li class="L3" id="line124"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L4" id="line125"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line126"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line127"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">);</span></code></li><li class="L7" id="line128"><code><span class="pln">      ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L8" id="line129"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line130"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line131"><code></code></li><li class="L1" id="line132"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L2" id="line133"><code><span class="com">   * @param {HTMLElement} toggle Target element to toggle.</span></code></li><li class="L3" id="line134"><code><span class="com">   */</span></code></li><li class="L4" id="line135"><code><span class="pln">  handleClickOnSort </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">toggle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">(</span><span class="kwd">event</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line136"><code><span class="pln">    </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L6" id="line137"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> table </span><span class="pun">=</span><span class="pln"> toggle</span><span class="pun">.</span><span class="pln">closest</span><span class="pun">(</span><span class="str">'table'</span><span class="pun">);</span></code></li><li class="L7" id="line138"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> tbody </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'tbody'</span><span class="pun">,</span><span class="pln"> table</span><span class="pun">);</span></code></li><li class="L8" id="line139"><code><span class="pln">    let order </span><span class="pun">=</span><span class="pln"> toggle</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'aria-sort'</span><span class="pun">);</span></code></li><li class="L9" id="line140"><code></code></li><li class="L0" id="line141"><code><span class="pln">    </span><span class="com">// Get current column index, taking into account the colspan.</span></code></li><li class="L1" id="line142"><code><span class="pln">    let colIndex </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2" id="line143"><code><span class="pln">    let prev </span><span class="pun">=</span><span class="pln"> toggle</span><span class="pun">.</span><span class="pln">previousElementSibling</span><span class="pun">;</span></code></li><li class="L3" id="line144"><code><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prev</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line145"><code><span class="pln">      colIndex </span><span class="pun">+=</span><span class="pln"> prev</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'colspan'</span><span class="pun">)</span></code></li><li class="L5" id="line146"><code><span class="pln">        </span><span class="pun">?</span><span class="pln"> </span><span class="typ">Number</span><span class="pun">(</span><span class="pln">prev</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'colspan'</span><span class="pun">))</span></code></li><li class="L6" id="line147"><code><span class="pln">        </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L7" id="line148"><code><span class="pln">      prev </span><span class="pun">=</span><span class="pln"> prev</span><span class="pun">.</span><span class="pln">previousElementSibling</span><span class="pun">;</span></code></li><li class="L8" id="line149"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line150"><code></code></li><li class="L0" id="line151"><code><span class="pln">    </span><span class="com">// Cell comparer function.</span></code></li><li class="L1" id="line152"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> comparer </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx</span><span class="pun">,</span><span class="pln"> asc</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span></code></li><li class="L2" id="line153"><code><span class="pln">      </span><span class="pun">((</span><span class="pln">v1</span><span class="pun">,</span><span class="pln"> v2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span></code></li><li class="L3" id="line154"><code><span class="pln">        v1 </span><span class="pun">!==</span><span class="pln"> </span><span class="str">''</span><span class="pln"> </span><span class="pun">&&</span><span class="pln"> v2 </span><span class="pun">!==</span><span class="pln"> </span><span class="str">''</span><span class="pln"> </span><span class="pun">&&</span><span class="pln"> </span><span class="pun">!</span><span class="typ">Number</span><span class="pun">.</span><span class="pln">isNaN</span><span class="pun">(+</span><span class="pln">v1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&&</span><span class="pln"> </span><span class="pun">!</span><span class="typ">Number</span><span class="pun">.</span><span class="pln">isNaN</span><span class="pun">(+</span><span class="pln">v2</span><span class="pun">)</span></code></li><li class="L4" id="line155"><code><span class="pln">          </span><span class="pun">?</span><span class="pln"> v1 </span><span class="pun">-</span><span class="pln"> v2</span></code></li><li class="L5" id="line156"><code><span class="pln">          </span><span class="pun">:</span><span class="pln"> v1</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">().</span><span class="pln">localeCompare</span><span class="pun">(</span><span class="pln">v2</span><span class="pun">))(</span></code></li><li class="L6" id="line157"><code><span class="pln">        </span><span class="pun">(</span><span class="pln">asc </span><span class="pun">?</span><span class="pln"> a </span><span class="pun">:</span><span class="pln"> b</span><span class="pun">).</span><span class="pln">children</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="pln">textContent</span><span class="pun">,</span></code></li><li class="L7" id="line158"><code><span class="pln">        </span><span class="pun">(</span><span class="pln">asc </span><span class="pun">?</span><span class="pln"> b </span><span class="pun">:</span><span class="pln"> a</span><span class="pun">).</span><span class="pln">children</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">].</span><span class="pln">textContent</span><span class="pun">,</span></code></li><li class="L8" id="line159"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L9" id="line160"><code></code></li><li class="L0" id="line161"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">order </span><span class="pun">===</span><span class="pln"> </span><span class="str">'descending'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line162"><code><span class="pln">      </span><span class="com">// If current order is 'descending' reset column filter sort rows by default order.</span></code></li><li class="L2" id="line163"><code><span class="pln">      </span><span class="pun">[...</span><span class="pln">queryAll</span><span class="pun">(</span><span class="str">'tr'</span><span class="pun">,</span><span class="pln"> tbody</span><span class="pun">)].</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">tr</span><span class="pun">,</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line164"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> defaultTr </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">`[data-ecl-table-order='${index}']`</span><span class="pun">);</span></code></li><li class="L4" id="line165"><code><span class="pln">        tbody</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">defaultTr</span><span class="pun">);</span></code></li><li class="L5" id="line166"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L6" id="line167"><code><span class="pln">      order </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L7" id="line168"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line169"><code><span class="pln">      </span><span class="com">// Otherwise we sort the rows and set new order.</span></code></li><li class="L9" id="line170"><code><span class="pln">      </span><span class="pun">[...</span><span class="pln">queryAll</span><span class="pun">(</span><span class="str">'tr'</span><span class="pun">,</span><span class="pln"> tbody</span><span class="pun">)]</span></code></li><li class="L0" id="line171"><code><span class="pln">        </span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">comparer</span><span class="pun">(</span><span class="pln">colIndex</span><span class="pun">,</span><span class="pln"> order </span><span class="pun">!==</span><span class="pln"> </span><span class="str">'ascending'</span><span class="pun">))</span></code></li><li class="L1" id="line172"><code><span class="pln">        </span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">tr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> tbody</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">tr</span><span class="pun">));</span></code></li><li class="L2" id="line173"><code><span class="pln">      order </span><span class="pun">=</span><span class="pln"> order </span><span class="pun">===</span><span class="pln"> </span><span class="str">'ascending'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="str">'descending'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'ascending'</span><span class="pun">;</span></code></li><li class="L3" id="line174"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line175"><code></code></li><li class="L5" id="line176"><code><span class="pln">    </span><span class="com">// Change heading aria-sort attr.</span></code></li><li class="L6" id="line177"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sortHeadings</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">th</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line178"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">order </span><span class="pun">&&</span><span class="pln"> th </span><span class="pun">===</span><span class="pln"> toggle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line179"><code><span class="pln">        th</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-sort'</span><span class="pun">,</span><span class="pln"> order</span><span class="pun">);</span></code></li><li class="L9" id="line180"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line181"><code><span class="pln">        th</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'aria-sort'</span><span class="pun">);</span></code></li><li class="L1" id="line182"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L2" id="line183"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L3" id="line184"><code><span class="pln">  </span><span class="pun">};</span></code></li><li class="L4" id="line185"><code><span class="pun">}</span></code></li><li class="L5" id="line186"><code></code></li><li class="L6" id="line187"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">Table</span><span class="pun">;</span></code></li></ol></pre></article></section></div><br class="clear"><footer>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Thu Jul 04 2024 08:17:38 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.</footer><script>prettyPrint();</script><script src="scripts/polyfill.js"></script><script src="scripts/linenumber.js"></script></body></html>