<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>gallery.js - Documentation</title><script src="scripts/prettify/prettify.js"></script><script src="scripts/prettify/lang-css.js"></script><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link href="styles/prettify.css" rel="stylesheet" type="text/css"><link href="styles/jsdoc.css" rel="stylesheet" type="text/css"><script src="scripts/nav.js" defer></script><meta content="width=device-width,initial-scale=1" name="viewport"></head><body><input class="nav-trigger" id="nav-trigger" type="checkbox"> <label class="navicon-button x" for="nav-trigger"><div class="navicon"></div></label> <label class="overlay" for="nav-trigger"></label><nav><h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Gallery.html">Gallery</a><ul class="methods"><li data-type="method"><a href="Gallery.html#checkScreen">checkScreen</a></li><li data-type="method"><a href="Gallery.html#destroy">destroy</a></li><li data-type="method"><a href="Gallery.html#handleClickOnCloseButton">handleClickOnCloseButton</a></li><li data-type="method"><a href="Gallery.html#handleClickOnItem">handleClickOnItem</a></li><li data-type="method"><a href="Gallery.html#handleClickOnNextButton">handleClickOnNextButton</a></li><li data-type="method"><a href="Gallery.html#handleClickOnPreviousButton">handleClickOnPreviousButton</a></li><li data-type="method"><a href="Gallery.html#handleClickOnViewAll">handleClickOnViewAll</a></li><li data-type="method"><a href="Gallery.html#handleKeyPressOnItem">handleKeyPressOnItem</a></li><li data-type="method"><a href="Gallery.html#handleKeyboard">handleKeyboard</a></li><li data-type="method"><a href="Gallery.html#handleResize">handleResize</a></li><li data-type="method"><a href="Gallery.html#hideItems">hideItems</a></li><li data-type="method"><a href="Gallery.html#init">init</a></li><li data-type="method"><a href="Gallery.html#preventClickOnItem">preventClickOnItem</a></li><li data-type="method"><a href="Gallery.html#updateOverlay">updateOverlay</a></li><li data-type="method"><a href="Gallery.html#.autoInit">autoInit</a></li></ul></li></ul></nav><div id="main"><h1 class="page-title">gallery.js</h1><section><article><pre class="prettyprint source linenums"><ol class="linenums"><li class="L0" id="line1"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> queryOne</span><span class="pun">,</span><span class="pln"> queryAll </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@ecl/dom-utils'</span><span class="pun">;</span></code></li><li class="L1" id="line2"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> createFocusTrap </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'focus-trap'</span><span class="pun">;</span></code></li><li class="L2" id="line3"><code></code></li><li class="L3" id="line4"><code><span class="com">/**</span></code></li><li class="L4" id="line5"><code><span class="com"> * @param {HTMLElement} element DOM element for component instantiation and scope</span></code></li><li class="L5" id="line6"><code><span class="com"> * @param {Object} options</span></code></li><li class="L6" id="line7"><code><span class="com"> * @param {String} options.galleryItemSelector Selector for gallery element</span></code></li><li class="L7" id="line8"><code><span class="com"> * @param {String} options.descriptionSelector Selector for gallery description element</span></code></li><li class="L8" id="line9"><code><span class="com"> * @param {String} options.closeButtonSelector Selector for close button element</span></code></li><li class="L9" id="line10"><code><span class="com"> * @param {String} options.allButtonSelector Selector for view all button element</span></code></li><li class="L0" id="line11"><code><span class="com"> * @param {String} options.overlaySelector Selector for gallery overlay element</span></code></li><li class="L1" id="line12"><code><span class="com"> * @param {String} options.overlayHeaderSelector Selector for gallery overlay header element</span></code></li><li class="L2" id="line13"><code><span class="com"> * @param {String} options.overlayFooterSelector Selector for gallery overlay footer element</span></code></li><li class="L3" id="line14"><code><span class="com"> * @param {String} options.overlayMediaSelector Selector for gallery overlay media element</span></code></li><li class="L4" id="line15"><code><span class="com"> * @param {String} options.overlayCounterCurrentSelector Selector for gallery overlay current number element</span></code></li><li class="L5" id="line16"><code><span class="com"> * @param {String} options.overlayCounterMaxSelector Selector for display of number of elements in the gallery overlay</span></code></li><li class="L6" id="line17"><code><span class="com"> * @param {String} options.overlayDownloadSelector Selector for gallery overlay download element</span></code></li><li class="L7" id="line18"><code><span class="com"> * @param {String} options.overlayShareSelector Selector for gallery overlay share element</span></code></li><li class="L8" id="line19"><code><span class="com"> * @param {String} options.overlayDescriptionSelector Selector for gallery overlay description element</span></code></li><li class="L9" id="line20"><code><span class="com"> * @param {String} options.overlayPreviousSelector Selector for gallery overlay previous link element</span></code></li><li class="L0" id="line21"><code><span class="com"> * @param {String} options.overlayNextSelector Selector for gallery overlay next link element</span></code></li><li class="L1" id="line22"><code><span class="com"> * @param {String} options.videoPlayerLabelSelector Selector for video player label</span></code></li><li class="L2" id="line23"><code><span class="com"> * @param {Boolean} options.attachClickListener Whether or not to bind click events</span></code></li><li class="L3" id="line24"><code><span class="com"> * @param {Boolean} options.attachKeyListener Whether or not to bind keyup events</span></code></li><li class="L4" id="line25"><code><span class="com"> */</span></code></li><li class="L5" id="line26"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Gallery</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line27"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line28"><code><span class="com">   * @static</span></code></li><li class="L8" id="line29"><code><span class="com">   * Shorthand for instance creation and initialisation.</span></code></li><li class="L9" id="line30"><code><span class="com">   *</span></code></li><li class="L0" id="line31"><code><span class="com">   * @param {HTMLElement} root DOM element for component instantiation and scope</span></code></li><li class="L1" id="line32"><code><span class="com">   *</span></code></li><li class="L2" id="line33"><code><span class="com">   * @return {Gallery} An instance of Gallery.</span></code></li><li class="L3" id="line34"><code><span class="com">   */</span></code></li><li class="L4" id="line35"><code><span class="pln">  </span><span class="kwd">static</span><span class="pln"> autoInit</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> GALLERY</span><span class="pun">:</span><span class="pln"> defaultOptions </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{})</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line36"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> gallery </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Gallery</span><span class="pun">(</span><span class="pln">root</span><span class="pun">,</span><span class="pln"> defaultOptions</span><span class="pun">);</span></code></li><li class="L6" id="line37"><code><span class="pln">    gallery</span><span class="pun">.</span><span class="pln">init</span><span class="pun">();</span></code></li><li class="L7" id="line38"><code><span class="pln">    root</span><span class="pun">.</span><span class="typ">ECLGallery</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> gallery</span><span class="pun">;</span></code></li><li class="L8" id="line39"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> gallery</span><span class="pun">;</span></code></li><li class="L9" id="line40"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line41"><code></code></li><li class="L1" id="line42"><code><span class="pln">  constructor</span><span class="pun">(</span></code></li><li class="L2" id="line43"><code><span class="pln">    element</span><span class="pun">,</span></code></li><li class="L3" id="line44"><code><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4" id="line45"><code><span class="pln">      expandableSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-gallery-not-expandable'</span><span class="pun">,</span></code></li><li class="L5" id="line46"><code><span class="pln">      galleryItemSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-item]'</span><span class="pun">,</span></code></li><li class="L6" id="line47"><code><span class="pln">      descriptionSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-description]'</span><span class="pun">,</span></code></li><li class="L7" id="line48"><code><span class="pln">      noOverlaySelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-gallery-no-overlay'</span><span class="pun">,</span></code></li><li class="L8" id="line49"><code><span class="pln">      itemsLimitSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-gallery-visible-items'</span><span class="pun">,</span></code></li><li class="L9" id="line50"><code><span class="pln">      closeButtonSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-close]'</span><span class="pun">,</span></code></li><li class="L0" id="line51"><code><span class="pln">      viewAllSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-all]'</span><span class="pun">,</span></code></li><li class="L1" id="line52"><code><span class="pln">      viewAllLabelSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-gallery-collapsed-label'</span><span class="pun">,</span></code></li><li class="L2" id="line53"><code><span class="pln">      viewAllExpandedLabelSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-gallery-expanded-label'</span><span class="pun">,</span></code></li><li class="L3" id="line54"><code><span class="pln">      countSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-count]'</span><span class="pun">,</span></code></li><li class="L4" id="line55"><code><span class="pln">      overlaySelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay]'</span><span class="pun">,</span></code></li><li class="L5" id="line56"><code><span class="pln">      overlayHeaderSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-header]'</span><span class="pun">,</span></code></li><li class="L6" id="line57"><code><span class="pln">      overlayFooterSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-footer]'</span><span class="pun">,</span></code></li><li class="L7" id="line58"><code><span class="pln">      overlayMediaSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-media]'</span><span class="pun">,</span></code></li><li class="L8" id="line59"><code><span class="pln">      overlayCounterCurrentSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-counter-current]'</span><span class="pun">,</span></code></li><li class="L9" id="line60"><code><span class="pln">      overlayCounterMaxSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-counter-max]'</span><span class="pun">,</span></code></li><li class="L0" id="line61"><code><span class="pln">      overlayDownloadSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-download]'</span><span class="pun">,</span></code></li><li class="L1" id="line62"><code><span class="pln">      overlayShareSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-share]'</span><span class="pun">,</span></code></li><li class="L2" id="line63"><code><span class="pln">      overlayDescriptionSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-description]'</span><span class="pun">,</span></code></li><li class="L3" id="line64"><code><span class="pln">      overlayPreviousSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-previous]'</span><span class="pun">,</span></code></li><li class="L4" id="line65"><code><span class="pln">      overlayNextSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'[data-ecl-gallery-overlay-next]'</span><span class="pun">,</span></code></li><li class="L5" id="line66"><code><span class="pln">      videoPlayerLabelSelector </span><span class="pun">=</span><span class="pln"> </span><span class="str">'data-ecl-gallery-player-label'</span><span class="pun">,</span></code></li><li class="L6" id="line67"><code><span class="pln">      attachClickListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L7" id="line68"><code><span class="pln">      attachKeyListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L8" id="line69"><code><span class="pln">      attachResizeListener </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li class="L9" id="line70"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{},</span></code></li><li class="L0" id="line71"><code><span class="pln">  </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line72"><code><span class="pln">    </span><span class="com">// Check element</span></code></li><li class="L2" id="line73"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">element </span><span class="pun">||</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">nodeType </span><span class="pun">!==</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">.</span><span class="pln">ELEMENT_NODE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line74"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span></code></li><li class="L4" id="line75"><code><span class="pln">        </span><span class="str">'DOM element should be given to initialize this widget.'</span><span class="pun">,</span></code></li><li class="L5" id="line76"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L6" id="line77"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line78"><code></code></li><li class="L8" id="line79"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L9" id="line80"><code></code></li><li class="L0" id="line81"><code><span class="pln">    </span><span class="com">// Options</span></code></li><li class="L1" id="line82"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItemSelector </span><span class="pun">=</span><span class="pln"> galleryItemSelector</span><span class="pun">;</span></code></li><li class="L2" id="line83"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">descriptionSelector </span><span class="pun">=</span><span class="pln"> descriptionSelector</span><span class="pun">;</span></code></li><li class="L3" id="line84"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButtonSelector </span><span class="pun">=</span><span class="pln"> closeButtonSelector</span><span class="pun">;</span></code></li><li class="L4" id="line85"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllSelector </span><span class="pun">=</span><span class="pln"> viewAllSelector</span><span class="pun">;</span></code></li><li class="L5" id="line86"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">countSelector </span><span class="pun">=</span><span class="pln"> countSelector</span><span class="pun">;</span></code></li><li class="L6" id="line87"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsLimitSelector </span><span class="pun">=</span><span class="pln"> itemsLimitSelector</span><span class="pun">;</span></code></li><li class="L7" id="line88"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlaySelector </span><span class="pun">=</span><span class="pln"> overlaySelector</span><span class="pun">;</span></code></li><li class="L8" id="line89"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">noOverlaySelector </span><span class="pun">=</span><span class="pln"> noOverlaySelector</span><span class="pun">;</span></code></li><li class="L9" id="line90"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayHeaderSelector </span><span class="pun">=</span><span class="pln"> overlayHeaderSelector</span><span class="pun">;</span></code></li><li class="L0" id="line91"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayFooterSelector </span><span class="pun">=</span><span class="pln"> overlayFooterSelector</span><span class="pun">;</span></code></li><li class="L1" id="line92"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMediaSelector </span><span class="pun">=</span><span class="pln"> overlayMediaSelector</span><span class="pun">;</span></code></li><li class="L2" id="line93"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterCurrentSelector </span><span class="pun">=</span><span class="pln"> overlayCounterCurrentSelector</span><span class="pun">;</span></code></li><li class="L3" id="line94"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterMaxSelector </span><span class="pun">=</span><span class="pln"> overlayCounterMaxSelector</span><span class="pun">;</span></code></li><li class="L4" id="line95"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownloadSelector </span><span class="pun">=</span><span class="pln"> overlayDownloadSelector</span><span class="pun">;</span></code></li><li class="L5" id="line96"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShareSelector </span><span class="pun">=</span><span class="pln"> overlayShareSelector</span><span class="pun">;</span></code></li><li class="L6" id="line97"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDescriptionSelector </span><span class="pun">=</span><span class="pln"> overlayDescriptionSelector</span><span class="pun">;</span></code></li><li class="L7" id="line98"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPreviousSelector </span><span class="pun">=</span><span class="pln"> overlayPreviousSelector</span><span class="pun">;</span></code></li><li class="L8" id="line99"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNextSelector </span><span class="pun">=</span><span class="pln"> overlayNextSelector</span><span class="pun">;</span></code></li><li class="L9" id="line100"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">=</span><span class="pln"> attachClickListener</span><span class="pun">;</span></code></li><li class="L0" id="line101"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">=</span><span class="pln"> attachKeyListener</span><span class="pun">;</span></code></li><li class="L1" id="line102"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener </span><span class="pun">=</span><span class="pln"> attachResizeListener</span><span class="pun">;</span></code></li><li class="L2" id="line103"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabelSelector </span><span class="pun">=</span><span class="pln"> viewAllLabelSelector</span><span class="pun">;</span></code></li><li class="L3" id="line104"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllExpandedLabelSelector </span><span class="pun">=</span><span class="pln"> viewAllExpandedLabelSelector</span><span class="pun">;</span></code></li><li class="L4" id="line105"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableSelector </span><span class="pun">=</span><span class="pln"> expandableSelector</span><span class="pun">;</span></code></li><li class="L5" id="line106"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabelSelector </span><span class="pun">=</span><span class="pln"> videoPlayerLabelSelector</span><span class="pun">;</span></code></li><li class="L6" id="line107"><code></code></li><li class="L7" id="line108"><code><span class="pln">    </span><span class="com">// Private variables</span></code></li><li class="L8" id="line109"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9" id="line110"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButton </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L0" id="line111"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L1" id="line112"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L2" id="line113"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L3" id="line114"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayHeader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L4" id="line115"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayFooter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L5" id="line116"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L6" id="line117"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterCurrent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L7" id="line118"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterMax </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L8" id="line119"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9" id="line120"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L0" id="line121"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDescription </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L1" id="line122"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPrevious </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L2" id="line123"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNext </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L3" id="line124"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L4" id="line125"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L5" id="line126"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L6" id="line127"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L7" id="line128"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabel </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L8" id="line129"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">visibleItems </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L9" id="line130"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">breakpointMd </span><span class="pun">=</span><span class="pln"> </span><span class="lit">768</span><span class="pun">;</span></code></li><li class="L0" id="line131"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">breakpointLg </span><span class="pun">=</span><span class="pln"> </span><span class="lit">996</span><span class="pun">;</span></code></li><li class="L1" id="line132"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">imageHeight </span><span class="pun">=</span><span class="pln"> </span><span class="lit">185</span><span class="pun">;</span></code></li><li class="L2" id="line133"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">imageHeightBig </span><span class="pun">=</span><span class="pln"> </span><span class="lit">260</span><span class="pun">;</span></code></li><li class="L3" id="line134"><code></code></li><li class="L4" id="line135"><code><span class="pln">    </span><span class="com">// Bind `this` for use in callbacks</span></code></li><li class="L5" id="line136"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">iframeResize </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">iframeResize</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L6" id="line137"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L7" id="line138"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnViewAll </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnViewAll</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L8" id="line139"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnItem</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L9" id="line140"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">preventClickOnItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">preventClickOnItem</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L0" id="line141"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyPressOnItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyPressOnItem</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L1" id="line142"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousButton </span><span class="pun">=</span></code></li><li class="L2" id="line143"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousButton</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L3" id="line144"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextButton </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextButton</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L4" id="line145"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L5" id="line146"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L6" id="line147"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L7" id="line148"><code></code></li><li class="L8" id="line149"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L9" id="line150"><code><span class="com">   * Initialise component.</span></code></li><li class="L0" id="line151"><code><span class="com">   */</span></code></li><li class="L1" id="line152"><code><span class="pln">  init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line153"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">ECL</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line154"><code><span class="pln">      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeError</span><span class="pun">(</span><span class="str">'Called init but ECL is not present'</span><span class="pun">);</span></code></li><li class="L4" id="line155"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line156"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">=</span><span class="pln"> ECL</span><span class="pun">.</span><span class="pln">components </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">();</span></code></li><li class="L6" id="line157"><code><span class="pln">    </span><span class="com">// Query elements</span></code></li><li class="L7" id="line158"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandable </span><span class="pun">=</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandableSelector</span><span class="pun">);</span></code></li><li class="L8" id="line159"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">visibleItems </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">itemsLimitSelector</span><span class="pun">);</span></code></li><li class="L9" id="line160"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItemSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L0" id="line161"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButton </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButtonSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L1" id="line162"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">noOverlay </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">hasAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">noOverlaySelector</span><span class="pun">);</span></code></li><li class="L2" id="line163"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandable</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line164"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L4" id="line165"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabel </span><span class="pun">=</span></code></li><li class="L5" id="line166"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabelSelector</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span></code></li><li class="L6" id="line167"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">innerText</span><span class="pun">;</span></code></li><li class="L7" id="line168"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabelExpanded </span><span class="pun">=</span></code></li><li class="L8" id="line169"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllExpandedLabelSelector</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span></code></li><li class="L9" id="line170"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabel</span><span class="pun">;</span></code></li><li class="L0" id="line171"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line172"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">countSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L2" id="line173"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabel </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span></code></li><li class="L3" id="line174"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabelSelector</span><span class="pun">,</span></code></li><li class="L4" id="line175"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L5" id="line176"><code><span class="pln">    </span><span class="com">// Bind click event on view all (open first item)</span></code></li><li class="L6" id="line177"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line178"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnViewAll</span><span class="pun">);</span></code></li><li class="L8" id="line179"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line180"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">noOverlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line181"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlaySelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L1" id="line182"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayHeader </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayHeaderSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">);</span></code></li><li class="L2" id="line183"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayFooter </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayFooterSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">);</span></code></li><li class="L3" id="line184"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMediaSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">);</span></code></li><li class="L4" id="line185"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterCurrent </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L5" id="line186"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterCurrentSelector</span><span class="pun">,</span></code></li><li class="L6" id="line187"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">,</span></code></li><li class="L7" id="line188"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L8" id="line189"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterMax </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L9" id="line190"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterMaxSelector</span><span class="pun">,</span></code></li><li class="L0" id="line191"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">,</span></code></li><li class="L1" id="line192"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L2" id="line193"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L3" id="line194"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownloadSelector</span><span class="pun">,</span></code></li><li class="L4" id="line195"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">,</span></code></li><li class="L5" id="line196"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L6" id="line197"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShareSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">);</span></code></li><li class="L7" id="line198"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDescription </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L8" id="line199"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDescriptionSelector</span><span class="pun">,</span></code></li><li class="L9" id="line200"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">,</span></code></li><li class="L0" id="line201"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L1" id="line202"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPrevious </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span></code></li><li class="L2" id="line203"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPreviousSelector</span><span class="pun">,</span></code></li><li class="L3" id="line204"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">,</span></code></li><li class="L4" id="line205"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L5" id="line206"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNext </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNextSelector</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">);</span></code></li><li class="L6" id="line207"><code></code></li><li class="L7" id="line208"><code><span class="pln">      </span><span class="com">// Create focus trap</span></code></li><li class="L8" id="line209"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap </span><span class="pun">=</span><span class="pln"> createFocusTrap</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line210"><code><span class="pln">        escapeDeactivates</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span></code></li><li class="L0" id="line211"><code><span class="pln">        returnFocusOnDeactivate</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span></code></li><li class="L1" id="line212"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L2" id="line213"><code></code></li><li class="L3" id="line214"><code><span class="pln">      </span><span class="com">// Polyfill to support &lt;dialog></span></code></li><li class="L4" id="line215"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L5" id="line216"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">window</span><span class="pun">.</span><span class="typ">HTMLDialogElement</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line217"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L7" id="line218"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L8" id="line219"><code></code></li><li class="L9" id="line220"><code><span class="pln">      </span><span class="com">// Bind click event on close button</span></code></li><li class="L0" id="line221"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line222"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButton</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span></code></li><li class="L2" id="line223"><code><span class="pln">          </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L3" id="line224"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton</span><span class="pun">,</span></code></li><li class="L4" id="line225"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L5" id="line226"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L6" id="line227"><code></code></li><li class="L7" id="line228"><code><span class="pln">      </span><span class="com">// Bind click event on gallery items</span></code></li><li class="L8" id="line229"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line230"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line231"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line232"><code><span class="pln">            galleryItem</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnItem</span><span class="pun">);</span></code></li><li class="L2" id="line233"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L3" id="line234"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line235"><code><span class="pln">            galleryItem</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyPressOnItem</span><span class="pun">);</span></code></li><li class="L5" id="line236"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L6" id="line237"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L7" id="line238"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L8" id="line239"><code></code></li><li class="L9" id="line240"><code><span class="pln">      </span><span class="com">// Bind click event on previous button</span></code></li><li class="L0" id="line241"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPrevious</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line242"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPrevious</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span></code></li><li class="L2" id="line243"><code><span class="pln">          </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L3" id="line244"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousButton</span><span class="pun">,</span></code></li><li class="L4" id="line245"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L5" id="line246"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L6" id="line247"><code></code></li><li class="L7" id="line248"><code><span class="pln">      </span><span class="com">// Bind click event on next button</span></code></li><li class="L8" id="line249"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line250"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNext</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span></code></li><li class="L0" id="line251"><code><span class="pln">          </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L1" id="line252"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextButton</span><span class="pun">,</span></code></li><li class="L2" id="line253"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L3" id="line254"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line255"><code></code></li><li class="L5" id="line256"><code><span class="pln">      </span><span class="com">// Bind other close event</span></code></li><li class="L6" id="line257"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line258"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L8" id="line259"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line260"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line261"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'close'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton</span><span class="pun">);</span></code></li><li class="L1" id="line262"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L2" id="line263"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line264"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line265"><code><span class="pln">        galleryItem</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__item__link--frozen'</span><span class="pun">);</span></code></li><li class="L5" id="line266"><code><span class="pln">        galleryItem</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">preventClickOnItem</span><span class="pun">);</span></code></li><li class="L6" id="line267"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L7" id="line268"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8" id="line269"><code></code></li><li class="L9" id="line270"><code><span class="pln">    </span><span class="com">// Bind resize events</span></code></li><li class="L0" id="line271"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line272"><code><span class="pln">      window</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'resize'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">);</span></code></li><li class="L2" id="line273"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line274"><code></code></li><li class="L4" id="line275"><code><span class="pln">    </span><span class="com">// Init display of gallery items</span></code></li><li class="L5" id="line276"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">expandable</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line277"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkScreen</span><span class="pun">();</span></code></li><li class="L7" id="line278"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hideItems</span><span class="pun">();</span></code></li><li class="L8" id="line279"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line280"><code></code></li><li class="L0" id="line281"><code><span class="pln">    </span><span class="com">// Add number to gallery items</span></code></li><li class="L1" id="line282"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line283"><code><span class="pln">      galleryItem</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-gallery-item-id'</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">);</span></code></li><li class="L3" id="line284"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L4" id="line285"><code></code></li><li class="L5" id="line286"><code><span class="pln">    </span><span class="com">// Update counter</span></code></li><li class="L6" id="line287"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line288"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></code></li><li class="L8" id="line289"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line290"><code></code></li><li class="L0" id="line291"><code><span class="pln">    </span><span class="com">// Set ecl initialized attribute</span></code></li><li class="L1" id="line292"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'true'</span><span class="pun">);</span></code></li><li class="L2" id="line293"><code><span class="pln">    ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L3" id="line294"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L4" id="line295"><code></code></li><li class="L5" id="line296"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line297"><code><span class="com">   * Destroy component.</span></code></li><li class="L7" id="line298"><code><span class="com">   */</span></code></li><li class="L8" id="line299"><code><span class="pln">  destroy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line300"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButton</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line301"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">closeButton</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span></code></li><li class="L1" id="line302"><code><span class="pln">        </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L2" id="line303"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton</span><span class="pun">,</span></code></li><li class="L3" id="line304"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L4" id="line305"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line306"><code></code></li><li class="L6" id="line307"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line308"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnViewAll</span><span class="pun">);</span></code></li><li class="L8" id="line309"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line310"><code></code></li><li class="L0" id="line311"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line312"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line313"><code><span class="pln">        galleryItem</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnItem</span><span class="pun">);</span></code></li><li class="L3" id="line314"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L4" id="line315"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line316"><code></code></li><li class="L6" id="line317"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPrevious</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line318"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayPrevious</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span></code></li><li class="L8" id="line319"><code><span class="pln">        </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L9" id="line320"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnPreviousButton</span><span class="pun">,</span></code></li><li class="L0" id="line321"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L1" id="line322"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2" id="line323"><code></code></li><li class="L3" id="line324"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachClickListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line325"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayNext</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span></code></li><li class="L5" id="line326"><code><span class="pln">        </span><span class="str">'click'</span><span class="pun">,</span></code></li><li class="L6" id="line327"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnNextButton</span><span class="pun">,</span></code></li><li class="L7" id="line328"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L8" id="line329"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line330"><code></code></li><li class="L0" id="line331"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachKeyListener </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line332"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'keyup'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleKeyboard</span><span class="pun">);</span></code></li><li class="L2" id="line333"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line334"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line335"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'close'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton</span><span class="pun">);</span></code></li><li class="L5" id="line336"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line337"><code></code></li><li class="L7" id="line338"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">attachResizeListener</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line339"><code><span class="pln">      window</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'resize'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleResize</span><span class="pun">);</span></code></li><li class="L9" id="line340"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line341"><code></code></li><li class="L1" id="line342"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line343"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'data-ecl-auto-initialized'</span><span class="pun">);</span></code></li><li class="L3" id="line344"><code><span class="pln">      ECL</span><span class="pun">.</span><span class="pln">components</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">element</span><span class="pun">);</span></code></li><li class="L4" id="line345"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line346"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line347"><code></code></li><li class="L7" id="line348"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line349"><code><span class="com">   * Check if current display is desktop or mobile</span></code></li><li class="L9" id="line350"><code><span class="com">   */</span></code></li><li class="L0" id="line351"><code><span class="pln">  checkScreen</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line352"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">window</span><span class="pun">.</span><span class="pln">innerWidth </span><span class="pun">></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">breakpointMd</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line353"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3" id="line354"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line355"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L5" id="line356"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line357"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">window</span><span class="pun">.</span><span class="pln">innerWidth </span><span class="pun">></span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">breakpointLg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line358"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isLarge </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L8" id="line359"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9" id="line360"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line361"><code></code></li><li class="L1" id="line362"><code><span class="pln">  iframeResize</span><span class="pun">(</span><span class="pln">iframe</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line363"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">iframe </span><span class="pun">&&</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line364"><code><span class="pln">      iframe </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'iframe'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">);</span></code></li><li class="L4" id="line365"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line366"><code></code></li><li class="L6" id="line367"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">iframe</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line368"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> width </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">innerWidth</span><span class="pun">;</span></code></li><li class="L8" id="line369"><code></code></li><li class="L9" id="line370"><code><span class="pln">      setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line371"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> height </span><span class="pun">=</span></code></li><li class="L1" id="line372"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">clientHeight </span><span class="pun">-</span></code></li><li class="L2" id="line373"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayHeader</span><span class="pun">.</span><span class="pln">clientHeight </span><span class="pun">-</span></code></li><li class="L3" id="line374"><code><span class="pln">          </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayFooter</span><span class="pun">.</span><span class="pln">clientHeight</span><span class="pun">;</span></code></li><li class="L4" id="line375"><code></code></li><li class="L5" id="line376"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">width </span><span class="pun">></span><span class="pln"> height</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line377"><code><span class="pln">          iframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'height'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${height}px`</span><span class="pun">);</span></code></li><li class="L7" id="line378"><code></code></li><li class="L8" id="line379"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">height </span><span class="pun">*</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="pun">></span><span class="pln"> width</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line380"><code><span class="pln">            iframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'width'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${width - 0.05 * width}px`</span><span class="pun">);</span></code></li><li class="L0" id="line381"><code><span class="pln">          </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line382"><code><span class="pln">            iframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'width'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${(height * 16) / 9}px`</span><span class="pun">);</span></code></li><li class="L2" id="line383"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L3" id="line384"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line385"><code><span class="pln">          iframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'width'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${width}px`</span><span class="pun">);</span></code></li><li class="L5" id="line386"><code><span class="pln">          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">width </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">></span><span class="pln"> height</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line387"><code><span class="pln">            iframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'height'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${height - 0.05 * height}px`</span><span class="pun">);</span></code></li><li class="L7" id="line388"><code><span class="pln">          </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line389"><code><span class="pln">            iframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'height'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${(width * 4) / 3}px`</span><span class="pun">);</span></code></li><li class="L9" id="line390"><code><span class="pln">          </span><span class="pun">}</span></code></li><li class="L0" id="line391"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1" id="line392"><code><span class="pln">      </span><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></code></li><li class="L2" id="line393"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line394"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L4" id="line395"><code></code></li><li class="L5" id="line396"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line397"><code><span class="com">   * @param {Int} rows/item number</span></code></li><li class="L7" id="line398"><code><span class="com">   *</span></code></li><li class="L8" id="line399"><code><span class="com">   * Hide several gallery items by default</span></code></li><li class="L9" id="line400"><code><span class="com">   * - 2 "lines" of items on desktop</span></code></li><li class="L0" id="line401"><code><span class="com">   * - only 3 items on mobile or the desired rows or items</span></code></li><li class="L1" id="line402"><code><span class="com">   *   when using the view more button.</span></code></li><li class="L2" id="line403"><code><span class="com">   */</span></code></li><li class="L3" id="line404"><code><span class="pln">  hideItems</span><span class="pun">(</span><span class="pln">plus </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line405"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">expanded</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L5" id="line406"><code></code></li><li class="L6" id="line407"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDesktop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line408"><code><span class="pln">      let hiddenItemIds </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span></code></li><li class="L8" id="line409"><code><span class="pln">      </span><span class="com">// We should browse the list first to mark the items to be hidden, and hide them later</span></code></li><li class="L9" id="line410"><code><span class="pln">      </span><span class="com">// otherwise, it will interfer with the calculus</span></code></li><li class="L0" id="line411"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line412"><code><span class="pln">        galleryItem</span><span class="pun">.</span><span class="pln">parentNode</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-gallery__item--hidden'</span><span class="pun">);</span></code></li><li class="L2" id="line413"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">key </span><span class="pun">>=</span><span class="pln"> </span><span class="typ">Number</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">visibleItems</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">Number</span><span class="pun">(</span><span class="pln">plus</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line414"><code><span class="pln">          hiddenItemIds </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[...</span><span class="pln">hiddenItemIds</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">];</span></code></li><li class="L4" id="line415"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5" id="line416"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L6" id="line417"><code><span class="pln">      hiddenItemIds</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">id</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line418"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">parentNode</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span></code></li><li class="L8" id="line419"><code><span class="pln">          </span><span class="str">'ecl-gallery__item--hidden'</span><span class="pun">,</span></code></li><li class="L9" id="line420"><code><span class="pln">        </span><span class="pun">);</span></code></li><li class="L0" id="line421"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L1" id="line422"><code><span class="pln">      </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L2" id="line423"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3" id="line424"><code></code></li><li class="L4" id="line425"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line426"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">key </span><span class="pun">></span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">Number</span><span class="pun">(</span><span class="pln">plus</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line427"><code><span class="pln">        galleryItem</span><span class="pun">.</span><span class="pln">parentNode</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__item--hidden'</span><span class="pun">);</span></code></li><li class="L7" id="line428"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line429"><code><span class="pln">        galleryItem</span><span class="pun">.</span><span class="pln">parentNode</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-gallery__item--hidden'</span><span class="pun">);</span></code></li><li class="L9" id="line430"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line431"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L1" id="line432"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L2" id="line433"><code></code></li><li class="L3" id="line434"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L4" id="line435"><code><span class="com">   * Trigger events on resize</span></code></li><li class="L5" id="line436"><code><span class="com">   * Uses a debounce, for performance</span></code></li><li class="L6" id="line437"><code><span class="com">   */</span></code></li><li class="L7" id="line438"><code><span class="pln">  handleResize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line439"><code><span class="pln">    clearTimeout</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer</span><span class="pun">);</span></code></li><li class="L9" id="line440"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">resizeTimer </span><span class="pun">=</span><span class="pln"> setTimeout</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line441"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkScreen</span><span class="pun">();</span></code></li><li class="L1" id="line442"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hideItems</span><span class="pun">();</span></code></li><li class="L2" id="line443"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">iframeResize</span><span class="pun">();</span></code></li><li class="L3" id="line444"><code><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="lit">200</span><span class="pun">);</span></code></li><li class="L4" id="line445"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line446"><code></code></li><li class="L6" id="line447"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line448"><code><span class="com">   * @param {HTMLElement} selectedItem Media element</span></code></li><li class="L8" id="line449"><code><span class="com">   */</span></code></li><li class="L9" id="line450"><code><span class="pln">  updateOverlay</span><span class="pun">(</span><span class="pln">selectedItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line451"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem </span><span class="pun">=</span><span class="pln"> selectedItem</span><span class="pun">;</span></code></li><li class="L1" id="line452"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> embeddedVideo </span><span class="pun">=</span><span class="pln"> selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span></code></li><li class="L2" id="line453"><code><span class="pln">      </span><span class="str">'data-ecl-gallery-item-embed-src'</span><span class="pun">,</span></code></li><li class="L3" id="line454"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L4" id="line455"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> embeddedVideoAudio </span><span class="pun">=</span><span class="pln"> selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span></code></li><li class="L5" id="line456"><code><span class="pln">      </span><span class="str">'data-ecl-gallery-item-embed-audio'</span><span class="pun">,</span></code></li><li class="L6" id="line457"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L7" id="line458"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> video </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'video'</span><span class="pun">,</span><span class="pln"> selectedItem</span><span class="pun">);</span></code></li><li class="L8" id="line459"><code><span class="pln">    let mediaElement </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9" id="line460"><code></code></li><li class="L0" id="line461"><code><span class="pln">    </span><span class="com">// Update media</span></code></li><li class="L1" id="line462"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">embeddedVideo </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line463"><code><span class="pln">      </span><span class="com">// Media is a embedded video</span></code></li><li class="L3" id="line464"><code><span class="pln">      mediaElement </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span></code></li><li class="L4" id="line465"><code><span class="pln">      mediaElement</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__slider-embed'</span><span class="pun">);</span></code></li><li class="L5" id="line466"><code></code></li><li class="L6" id="line467"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> mediaAudio </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span></code></li><li class="L7" id="line468"><code><span class="pln">      mediaAudio</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__slider-embed-audio'</span><span class="pun">);</span></code></li><li class="L8" id="line469"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">embeddedVideoAudio</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line470"><code><span class="pln">        mediaAudio</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> embeddedVideoAudio</span><span class="pun">;</span></code></li><li class="L0" id="line471"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L1" id="line472"><code></code></li><li class="L2" id="line473"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> mediaIframe </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'iframe'</span><span class="pun">);</span></code></li><li class="L3" id="line474"><code><span class="pln">      mediaIframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">,</span><span class="pln"> embeddedVideo</span><span class="pun">);</span></code></li><li class="L4" id="line475"><code><span class="pln">      mediaIframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'frameBorder'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'0'</span><span class="pun">);</span></code></li><li class="L5" id="line476"><code></code></li><li class="L6" id="line477"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabel</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line478"><code><span class="pln">        mediaIframe</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'title'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabel</span><span class="pun">);</span></code></li><li class="L8" id="line479"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line480"><code></code></li><li class="L0" id="line481"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line482"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">embeddedVideoAudio</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line483"><code><span class="pln">          mediaElement</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">mediaAudio</span><span class="pun">);</span></code></li><li class="L3" id="line484"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4" id="line485"><code><span class="pln">        mediaElement</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">mediaIframe</span><span class="pun">);</span></code></li><li class="L5" id="line486"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L6" id="line487"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">mediaElement</span><span class="pun">);</span></code></li><li class="L7" id="line488"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L8" id="line489"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">iframeResize</span><span class="pun">(</span><span class="pln">mediaIframe</span><span class="pun">);</span></code></li><li class="L9" id="line490"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">video </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line491"><code><span class="pln">      </span><span class="com">// Media is a video</span></code></li><li class="L1" id="line492"><code><span class="pln">      mediaElement </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'video'</span><span class="pun">);</span></code></li><li class="L2" id="line493"><code><span class="pln">      mediaElement</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'poster'</span><span class="pun">,</span><span class="pln"> video</span><span class="pun">.</span><span class="pln">poster</span><span class="pun">);</span></code></li><li class="L3" id="line494"><code><span class="pln">      mediaElement</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'controls'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'controls'</span><span class="pun">);</span></code></li><li class="L4" id="line495"><code><span class="pln">      mediaElement</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__slider-video'</span><span class="pun">);</span></code></li><li class="L5" id="line496"><code></code></li><li class="L6" id="line497"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabel</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line498"><code><span class="pln">        mediaElement</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-label'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">videoPlayerLabel</span><span class="pun">);</span></code></li><li class="L8" id="line499"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line500"><code></code></li><li class="L0" id="line501"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line502"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L2" id="line503"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">mediaElement</span><span class="pun">);</span></code></li><li class="L3" id="line504"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line505"><code></code></li><li class="L5" id="line506"><code><span class="pln">      </span><span class="com">// Get sources</span></code></li><li class="L6" id="line507"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> sources </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="str">'source'</span><span class="pun">,</span><span class="pln"> video</span><span class="pun">);</span></code></li><li class="L7" id="line508"><code><span class="pln">      sources</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">source</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line509"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> sourceTag </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'source'</span><span class="pun">);</span></code></li><li class="L9" id="line510"><code><span class="pln">        sourceTag</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">,</span><span class="pln"> source</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">));</span></code></li><li class="L0" id="line511"><code><span class="pln">        sourceTag</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'type'</span><span class="pun">,</span><span class="pln"> source</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'type'</span><span class="pun">));</span></code></li><li class="L1" id="line512"><code><span class="pln">        mediaElement</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">sourceTag</span><span class="pun">);</span></code></li><li class="L2" id="line513"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L3" id="line514"><code></code></li><li class="L4" id="line515"><code><span class="pln">      </span><span class="com">// Get tracks</span></code></li><li class="L5" id="line516"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> tracks </span><span class="pun">=</span><span class="pln"> queryAll</span><span class="pun">(</span><span class="str">'track'</span><span class="pun">,</span><span class="pln"> video</span><span class="pun">);</span></code></li><li class="L6" id="line517"><code><span class="pln">      tracks</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">track</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line518"><code><span class="pln">        </span><span class="kwd">const</span><span class="pln"> trackTag </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'track'</span><span class="pun">);</span></code></li><li class="L8" id="line519"><code><span class="pln">        trackTag</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">,</span><span class="pln"> track</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">));</span></code></li><li class="L9" id="line520"><code><span class="pln">        trackTag</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'kind'</span><span class="pun">,</span><span class="pln"> track</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'kind'</span><span class="pun">));</span></code></li><li class="L0" id="line521"><code><span class="pln">        trackTag</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'srclang'</span><span class="pun">,</span><span class="pln"> track</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'srcLang'</span><span class="pun">));</span></code></li><li class="L1" id="line522"><code><span class="pln">        trackTag</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'label'</span><span class="pun">,</span><span class="pln"> track</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'label'</span><span class="pun">));</span></code></li><li class="L2" id="line523"><code><span class="pln">        mediaElement</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">trackTag</span><span class="pun">);</span></code></li><li class="L3" id="line524"><code><span class="pln">      </span><span class="pun">});</span></code></li><li class="L4" id="line525"><code></code></li><li class="L5" id="line526"><code><span class="pln">      mediaElement</span><span class="pun">.</span><span class="pln">load</span><span class="pun">();</span></code></li><li class="L6" id="line527"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line528"><code><span class="pln">      </span><span class="com">// Media is an image</span></code></li><li class="L8" id="line529"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> image </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'img'</span><span class="pun">,</span><span class="pln"> selectedItem</span><span class="pun">);</span></code></li><li class="L9" id="line530"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> picture </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'picture'</span><span class="pun">,</span><span class="pln"> selectedItem</span><span class="pun">);</span></code></li><li class="L0" id="line531"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">picture</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line532"><code><span class="pln">        image</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-gallery__image'</span><span class="pun">);</span></code></li><li class="L2" id="line533"><code><span class="pln">        mediaElement </span><span class="pun">=</span><span class="pln"> picture</span><span class="pun">.</span><span class="pln">cloneNode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L3" id="line534"><code><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line535"><code><span class="pln">        </span><span class="com">// backward compatibility</span></code></li><li class="L5" id="line536"><code><span class="pln">        mediaElement </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'img'</span><span class="pun">);</span></code></li><li class="L6" id="line537"><code><span class="pln">        mediaElement</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'src'</span><span class="pun">));</span></code></li><li class="L7" id="line538"><code><span class="pln">        mediaElement</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'alt'</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'alt'</span><span class="pun">));</span></code></li><li class="L8" id="line539"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L9" id="line540"><code><span class="pln">      mediaElement</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__slider-image'</span><span class="pun">);</span></code></li><li class="L0" id="line541"><code></code></li><li class="L1" id="line542"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line543"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L3" id="line544"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">mediaElement</span><span class="pun">);</span></code></li><li class="L4" id="line545"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line546"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6" id="line547"><code></code></li><li class="L7" id="line548"><code><span class="pln">    </span><span class="com">// Get id</span></code></li><li class="L8" id="line549"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'id'</span><span class="pun">);</span></code></li><li class="L9" id="line550"><code></code></li><li class="L0" id="line551"><code><span class="pln">    </span><span class="com">// Update counter</span></code></li><li class="L1" id="line552"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterCurrent</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span></code></li><li class="L2" id="line553"><code><span class="pln">      </span><span class="pun">+</span><span class="pln">selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'data-ecl-gallery-item-id'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L3" id="line554"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayCounterMax</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></code></li><li class="L4" id="line555"><code></code></li><li class="L5" id="line556"><code><span class="pln">    </span><span class="com">// Prepare display of links for mobile</span></code></li><li class="L6" id="line557"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> actionMobile </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span></code></li><li class="L7" id="line558"><code><span class="pln">    actionMobile</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__detail-actions-mobile'</span><span class="pun">);</span></code></li><li class="L8" id="line559"><code></code></li><li class="L9" id="line560"><code><span class="pln">    </span><span class="com">// Update download link</span></code></li><li class="L0" id="line561"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload </span><span class="pun">!==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&&</span><span class="pln"> embeddedVideo </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line562"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload</span><span class="pun">.</span><span class="pln">href </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">.</span><span class="pln">href</span><span class="pun">;</span></code></li><li class="L2" id="line563"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line564"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-describedby'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${id}-title`</span><span class="pun">);</span></code></li><li class="L4" id="line565"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5" id="line566"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload</span><span class="pun">.</span><span class="pln">hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L6" id="line567"><code><span class="pln">      actionMobile</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload</span><span class="pun">.</span><span class="pln">cloneNode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">));</span></code></li><li class="L7" id="line568"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload </span><span class="pun">!==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line569"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDownload</span><span class="pun">.</span><span class="pln">hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L9" id="line570"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0" id="line571"><code></code></li><li class="L1" id="line572"><code><span class="pln">    </span><span class="com">// Update share link</span></code></li><li class="L2" id="line573"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> shareHref </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span></code></li><li class="L3" id="line574"><code><span class="pln">      </span><span class="str">'data-ecl-gallery-item-share'</span><span class="pun">,</span></code></li><li class="L4" id="line575"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L5" id="line576"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">shareHref </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line577"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare</span><span class="pun">.</span><span class="pln">href </span><span class="pun">=</span><span class="pln"> shareHref</span><span class="pun">;</span></code></li><li class="L7" id="line578"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">id</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8" id="line579"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'aria-describedby'</span><span class="pun">,</span><span class="pln"> </span><span class="str">`${id}-title`</span><span class="pun">);</span></code></li><li class="L9" id="line580"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L0" id="line581"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare</span><span class="pun">.</span><span class="pln">hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1" id="line582"><code><span class="pln">      actionMobile</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare</span><span class="pun">.</span><span class="pln">cloneNode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">));</span></code></li><li class="L2" id="line583"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line584"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayShare</span><span class="pun">.</span><span class="pln">hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4" id="line585"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line586"><code></code></li><li class="L6" id="line587"><code><span class="pln">    </span><span class="com">// Update description</span></code></li><li class="L7" id="line588"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> description </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">descriptionSelector</span><span class="pun">,</span><span class="pln"> selectedItem</span><span class="pun">);</span></code></li><li class="L8" id="line589"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">description</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line590"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDescription</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> description</span><span class="pun">.</span><span class="pln">innerHTML</span><span class="pun">;</span></code></li><li class="L0" id="line591"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1" id="line592"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">actionMobile</span><span class="pun">.</span><span class="pln">childNodes</span><span class="pun">.</span><span class="pln">length </span><span class="pun">></span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line593"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayDescription</span><span class="pun">.</span><span class="pln">prepend</span><span class="pun">(</span><span class="pln">actionMobile</span><span class="pun">);</span></code></li><li class="L3" id="line594"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line595"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5" id="line596"><code></code></li><li class="L6" id="line597"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L7" id="line598"><code><span class="com">   * Handles keyboard events such as Escape and navigation.</span></code></li><li class="L8" id="line599"><code><span class="com">   *</span></code></li><li class="L9" id="line600"><code><span class="com">   * @param {Event} e</span></code></li><li class="L0" id="line601"><code><span class="com">   */</span></code></li><li class="L1" id="line602"><code><span class="pln">  handleKeyboard</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line603"><code><span class="pln">    </span><span class="com">// Detect press on Escape</span></code></li><li class="L3" id="line604"><code><span class="pln">    </span><span class="com">// Only used if the browser do not support &lt;dialog></span></code></li><li class="L4" id="line605"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Escape'</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key </span><span class="pun">===</span><span class="pln"> </span><span class="str">'Esc'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5" id="line606"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnCloseButton</span><span class="pun">();</span></code></li><li class="L6" id="line607"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7" id="line608"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8" id="line609"><code></code></li><li class="L9" id="line610"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L0" id="line611"><code><span class="com">   * Invoke listeners for close events.</span></code></li><li class="L1" id="line612"><code><span class="com">   */</span></code></li><li class="L2" id="line613"><code><span class="pln">  handleClickOnCloseButton</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line614"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line615"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L5" id="line616"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6" id="line617"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">removeAttribute</span><span class="pun">(</span><span class="str">'open'</span><span class="pun">);</span></code></li><li class="L7" id="line618"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8" id="line619"><code></code></li><li class="L9" id="line620"><code><span class="pln">    </span><span class="com">// Remove iframe</span></code></li><li class="L0" id="line621"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> embeddedVideo </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'iframe'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">);</span></code></li><li class="L1" id="line622"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">embeddedVideo</span><span class="pun">)</span><span class="pln"> embeddedVideo</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">();</span></code></li><li class="L2" id="line623"><code></code></li><li class="L3" id="line624"><code><span class="pln">    </span><span class="com">// Stop video</span></code></li><li class="L4" id="line625"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> video </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'video'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlayMedia</span><span class="pun">);</span></code></li><li class="L5" id="line626"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">video</span><span class="pun">)</span><span class="pln"> video</span><span class="pun">.</span><span class="pln">pause</span><span class="pun">();</span></code></li><li class="L6" id="line627"><code></code></li><li class="L7" id="line628"><code><span class="pln">    </span><span class="com">// Untrap focus</span></code></li><li class="L8" id="line629"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap</span><span class="pun">.</span><span class="pln">deactivate</span><span class="pun">();</span></code></li><li class="L9" id="line630"><code></code></li><li class="L0" id="line631"><code><span class="pln">    </span><span class="com">// Restore css class on items</span></code></li><li class="L1" id="line632"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">galleryItem</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line633"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> image </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'img'</span><span class="pun">,</span><span class="pln"> galleryItem</span><span class="pun">);</span></code></li><li class="L3" id="line634"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">image</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4" id="line635"><code><span class="pln">        image</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-gallery__image'</span><span class="pun">);</span></code></li><li class="L5" id="line636"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L6" id="line637"><code><span class="pln">    </span><span class="pun">});</span></code></li><li class="L7" id="line638"><code></code></li><li class="L8" id="line639"><code><span class="pln">    </span><span class="com">// Focus item</span></code></li><li class="L9" id="line640"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">.</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L0" id="line641"><code></code></li><li class="L1" id="line642"><code><span class="pln">    </span><span class="com">// Enable scroll on body</span></code></li><li class="L2" id="line643"><code><span class="pln">    document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-u-disablescroll'</span><span class="pun">);</span></code></li><li class="L3" id="line644"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L4" id="line645"><code></code></li><li class="L5" id="line646"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L6" id="line647"><code><span class="com">   * Invoke listeners for on pressing the spacebar button.</span></code></li><li class="L7" id="line648"><code><span class="com">   *</span></code></li><li class="L8" id="line649"><code><span class="com">   * @param {Event} e</span></code></li><li class="L9" id="line650"><code><span class="com">   */</span></code></li><li class="L0" id="line651"><code><span class="pln">  handleKeyPressOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line652"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">keyCode </span><span class="pun">===</span><span class="pln"> </span><span class="lit">32</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line653"><code><span class="pln">      </span><span class="com">// If spacebar trigger the modal</span></code></li><li class="L3" id="line654"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleClickOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L4" id="line655"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line656"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line657"><code></code></li><li class="L7" id="line658"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line659"><code><span class="com">   * Invoke listeners for on click events on view all.</span></code></li><li class="L9" id="line660"><code><span class="com">   *</span></code></li><li class="L0" id="line661"><code><span class="com">   * @param {Event} e</span></code></li><li class="L1" id="line662"><code><span class="com">   */</span></code></li><li class="L2" id="line663"><code><span class="pln">  handleClickOnViewAll</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line664"><code><span class="pln">    e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L4" id="line665"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L5" id="line666"><code></code></li><li class="L6" id="line667"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">expanded</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line668"><code><span class="pln">      </span><span class="kwd">delete</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">expanded</span><span class="pun">;</span></code></li><li class="L8" id="line669"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">checkScreen</span><span class="pun">();</span></code></li><li class="L9" id="line670"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hideItems</span><span class="pun">();</span></code></li><li class="L0" id="line671"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabel</span><span class="pun">;</span></code></li><li class="L1" id="line672"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line673"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">expanded </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3" id="line674"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAll</span><span class="pun">.</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">viewAllLabelExpanded</span><span class="pun">;</span></code></li><li class="L4" id="line675"><code></code></li><li class="L5" id="line676"><code><span class="pln">      </span><span class="kwd">const</span><span class="pln"> hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">filter</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span></code></li><li class="L6" id="line677"><code><span class="pln">        item</span><span class="pun">.</span><span class="pln">parentNode</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'ecl-gallery__item--hidden'</span><span class="pun">),</span></code></li><li class="L7" id="line678"><code><span class="pln">      </span><span class="pun">);</span></code></li><li class="L8" id="line679"><code><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">hidden</span><span class="pun">.</span><span class="pln">length </span><span class="pun">></span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line680"><code><span class="pln">        hidden</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">((</span><span class="pln">item</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=></span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line681"><code><span class="pln">          item</span><span class="pun">.</span><span class="pln">parentNode</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'ecl-gallery__item--hidden'</span><span class="pun">);</span></code></li><li class="L1" id="line682"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L2" id="line683"><code><span class="pln">        hidden</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">focus</span><span class="pun">();</span></code></li><li class="L3" id="line684"><code><span class="pln">      </span><span class="pun">}</span></code></li><li class="L4" id="line685"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5" id="line686"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line687"><code></code></li><li class="L7" id="line688"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line689"><code><span class="com">   * Invoke listeners for on click events on the given gallery item.</span></code></li><li class="L9" id="line690"><code><span class="com">   *</span></code></li><li class="L0" id="line691"><code><span class="com">   * @param {Event} e</span></code></li><li class="L1" id="line692"><code><span class="com">   */</span></code></li><li class="L2" id="line693"><code><span class="pln">  handleClickOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3" id="line694"><code><span class="pln">    e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L4" id="line695"><code></code></li><li class="L5" id="line696"><code><span class="pln">    </span><span class="com">// Disable scroll on body</span></code></li><li class="L6" id="line697"><code><span class="pln">    document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">classList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="str">'ecl-u-disablescroll'</span><span class="pun">);</span></code></li><li class="L7" id="line698"><code></code></li><li class="L8" id="line699"><code><span class="pln">    </span><span class="com">// Display overlay</span></code></li><li class="L9" id="line700"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isDialogSupported</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0" id="line701"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">showModal</span><span class="pun">();</span></code></li><li class="L1" id="line702"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2" id="line703"><code><span class="pln">      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">overlay</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">'open'</span><span class="pun">,</span><span class="pln"> </span><span class="str">''</span><span class="pun">);</span></code></li><li class="L3" id="line704"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4" id="line705"><code></code></li><li class="L5" id="line706"><code><span class="pln">    </span><span class="com">// Update overlay</span></code></li><li class="L6" id="line707"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">updateOverlay</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">currentTarget</span><span class="pun">);</span></code></li><li class="L7" id="line708"><code></code></li><li class="L8" id="line709"><code><span class="pln">    </span><span class="com">// Trap focus</span></code></li><li class="L9" id="line710"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">focusTrap</span><span class="pun">.</span><span class="pln">activate</span><span class="pun">();</span></code></li><li class="L0" id="line711"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L1" id="line712"><code></code></li><li class="L2" id="line713"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L3" id="line714"><code><span class="com">   * handle click event on gallery items when no overlay.</span></code></li><li class="L4" id="line715"><code><span class="com">   *</span></code></li><li class="L5" id="line716"><code><span class="com">   * @param {Event} e</span></code></li><li class="L6" id="line717"><code><span class="com">   */</span></code></li><li class="L7" id="line718"><code><span class="pln">  </span><span class="com">// eslint-disable-next-line class-methods-use-this</span></code></li><li class="L8" id="line719"><code><span class="pln">  preventClickOnItem</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9" id="line720"><code><span class="pln">    e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></code></li><li class="L0" id="line721"><code><span class="pln">    e</span><span class="pun">.</span><span class="pln">stopPropagation</span><span class="pun">();</span></code></li><li class="L1" id="line722"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L2" id="line723"><code></code></li><li class="L3" id="line724"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L4" id="line725"><code><span class="com">   * Invoke listeners for on click events on previous navigation link.</span></code></li><li class="L5" id="line726"><code><span class="com">   */</span></code></li><li class="L6" id="line727"><code><span class="pln">  handleClickOnPreviousButton</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7" id="line728"><code><span class="pln">    </span><span class="com">// Get current id</span></code></li><li class="L8" id="line729"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> currentId </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span></code></li><li class="L9" id="line730"><code><span class="pln">      </span><span class="str">'data-ecl-gallery-item-id'</span><span class="pun">,</span></code></li><li class="L0" id="line731"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L1" id="line732"><code></code></li><li class="L2" id="line733"><code><span class="pln">    </span><span class="com">// Get previous id</span></code></li><li class="L3" id="line734"><code><span class="pln">    let previousId </span><span class="pun">=</span><span class="pln"> </span><span class="pun">+</span><span class="pln">currentId </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L4" id="line735"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">previousId </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> previousId </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">length </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L5" id="line736"><code></code></li><li class="L6" id="line737"><code><span class="pln">    </span><span class="com">// Stop video</span></code></li><li class="L7" id="line738"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> video </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'video'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">);</span></code></li><li class="L8" id="line739"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">video</span><span class="pun">)</span><span class="pln"> video</span><span class="pun">.</span><span class="pln">pause</span><span class="pun">();</span></code></li><li class="L9" id="line740"><code></code></li><li class="L0" id="line741"><code><span class="pln">    </span><span class="com">// Update overlay</span></code></li><li class="L1" id="line742"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">updateOverlay</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">[</span><span class="pln">previousId</span><span class="pun">]);</span></code></li><li class="L2" id="line743"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">[</span><span class="pln">previousId</span><span class="pun">];</span></code></li><li class="L3" id="line744"><code></code></li><li class="L4" id="line745"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L5" id="line746"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6" id="line747"><code></code></li><li class="L7" id="line748"><code><span class="pln">  </span><span class="com">/**</span></code></li><li class="L8" id="line749"><code><span class="com">   * Invoke listeners for on click events on next navigation link.</span></code></li><li class="L9" id="line750"><code><span class="com">   */</span></code></li><li class="L0" id="line751"><code><span class="pln">  handleClickOnNextButton</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1" id="line752"><code><span class="pln">    </span><span class="com">// Get current id</span></code></li><li class="L2" id="line753"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> currentId </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span></code></li><li class="L3" id="line754"><code><span class="pln">      </span><span class="str">'data-ecl-gallery-item-id'</span><span class="pun">,</span></code></li><li class="L4" id="line755"><code><span class="pln">    </span><span class="pun">);</span></code></li><li class="L5" id="line756"><code></code></li><li class="L6" id="line757"><code><span class="pln">    </span><span class="com">// Get next id</span></code></li><li class="L7" id="line758"><code><span class="pln">    let nextId </span><span class="pun">=</span><span class="pln"> </span><span class="pun">+</span><span class="pln">currentId </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L8" id="line759"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nextId </span><span class="pun">>=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class="pln"> nextId </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L9" id="line760"><code></code></li><li class="L0" id="line761"><code><span class="pln">    </span><span class="com">// Stop video</span></code></li><li class="L1" id="line762"><code><span class="pln">    </span><span class="kwd">const</span><span class="pln"> video </span><span class="pun">=</span><span class="pln"> queryOne</span><span class="pun">(</span><span class="str">'video'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem</span><span class="pun">);</span></code></li><li class="L2" id="line763"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">video</span><span class="pun">)</span><span class="pln"> video</span><span class="pun">.</span><span class="pln">pause</span><span class="pun">();</span></code></li><li class="L3" id="line764"><code></code></li><li class="L4" id="line765"><code><span class="pln">    </span><span class="com">// Update overlay</span></code></li><li class="L5" id="line766"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">updateOverlay</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">[</span><span class="pln">nextId</span><span class="pun">]);</span></code></li><li class="L6" id="line767"><code><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">selectedItem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">galleryItems</span><span class="pun">[</span><span class="pln">nextId</span><span class="pun">];</span></code></li><li class="L7" id="line768"><code></code></li><li class="L8" id="line769"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L9" id="line770"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0" id="line771"><code><span class="pun">}</span></code></li><li class="L1" id="line772"><code></code></li><li class="L2" id="line773"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">Gallery</span><span class="pun">;</span></code></li></ol></pre></article></section></div><br class="clear"><footer>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Thu Jul 04 2024 08:17:34 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.</footer><script>prettyPrint();</script><script src="scripts/polyfill.js"></script><script src="scripts/linenumber.js"></script></body></html>